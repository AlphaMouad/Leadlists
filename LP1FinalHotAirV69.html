<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- PRIMARY META -->
    <title>L'Éveil Céleste : Vol Royal au-dessus de la Palmeraie</title>
    <meta name="description" content="Une parenthèse enchantée entre les cimes de l'Atlas et l'oasis millénaire. Vol en montgolfière au lever du soleil et petit-déjeuner berbère.">
    <meta name="keywords" content="Marrakech, Montgolfière, Palmeraie, Vol, Ciel, Luxe, Petit-déjeuner">
    <meta name="author" content="Marrakech Top Spot">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://marrakech-topspot.com/eveil-celeste-palmeraie">

    <!-- OPEN GRAPH -->
    <meta property="og:type" content="product">
    <meta property="og:url" content="https://marrakech-topspot.com/eveil-celeste-palmeraie">
    <meta property="og:title" content="L'Éveil Céleste : Vol Royal au-dessus de la Palmeraie">
    <meta property="og:description" content="Une parenthèse enchantée entre les cimes de l'Atlas et l'oasis millénaire. Vol en montgolfière au lever du soleil et petit-déjeuner berbère.">
    <meta property="og:image" content="https://MTSZone.b-cdn.net/Agafay/Agafay0.jpg">
    <meta property="og:locale" content="fr_FR">
    <meta property="product:price:amount" content="1200">
    <meta property="product:price:currency" content="MAD">

    <!-- FAVICON -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23EC5075' rx='20' width='100' height='100'/><text x='50' y='70' font-size='60' font-family='Arial' font-weight='bold' fill='white' text-anchor='middle'>M</text></svg>">
    <meta name="theme-color" content="#EC5075">

    <!-- PRECONNECT -->
    <link rel="preconnect" href="https://MTSZone.b-cdn.net" crossorigin>
    <link rel="preconnect" href="https://player.mediadelivery.net" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.google.com">

    <!-- ELITE PRELOAD -->
    <link rel="preload" as="image" href="https://MTSZone.b-cdn.net/Agafay/Agafay0.jpg" fetchpriority="high">
    <link rel="preload" as="image" href="https://MTSZone.b-cdn.net/Agafay/Vertical/15.jpg">
    <link rel="preload" as="audio" href="https://MTSZone.b-cdn.net/HotAirAudio1.MP3" crossorigin>

    <!-- STYLESHEETS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@500;600;700;800&display=swap" rel="stylesheet">

    <!-- BUNNY.NET PLAYER -->
    <script src="https://assets.mediadelivery.net/playerjs/player-0.1.0.min.js"></script>

    <!-- TAILWIND CONFIG -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#EC5075',
                        'primary-dark': '#d63d62',
                        'primary-light': '#f06a8d'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
                        heading: ['Playfair Display', 'Georgia', 'serif']
                    }
                }
            }
        }
    </script>

    <style>
        :root {
            --color-primary: #EC5075;
            --color-primary-dark: #d63d62;
            --safe-area-bottom: env(safe-area-inset-bottom, 0px);
            --ease-luxury: cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        * { -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Inter', system-ui, sans-serif; background: #fff; color: #1a1a1a; -webkit-font-smoothing: antialiased; }
        h1, h2, h3, .font-heading { font-family: 'Playfair Display', serif; }
        html { scroll-behavior: smooth; }

        /* ANIMATIONS */
        .fade-up { animation: fadeUp 0.6s ease-out forwards; opacity: 0; transform: translateY(15px); }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

        @keyframes pulse-dot { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(1.2); } }
        .pulse-dot { animation: pulse-dot 2s ease-in-out infinite; }

        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }

        /* TIMELINE */
        .timeline-line { position: absolute; left: 15px; top: 8px; bottom: 0; width: 2px; background: linear-gradient(to bottom, #e5e7eb, transparent); }
        .timeline-item:last-child .timeline-line { display: none; }

        /* STICKY WIDGET */
        .sticky-widget { position: sticky; top: 5rem; z-index: 40; }

        /* BUTTON EFFECTS */
        .btn-primary {
            background: linear-gradient(135deg, #EC5075 0%, #d63d62 100%);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative; overflow: hidden;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 12px 28px -6px rgba(236, 80, 117, 0.5); }
        .btn-primary:active { transform: translateY(0) scale(0.98); }
        .btn-primary::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        .btn-primary:hover::after { left: 100%; }

        .btn-primary:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none !important;
        }

        /* ELITE BADGE */
        .elite-story-badge {
            position: absolute;
            bottom: 16px;
            left: 16px;
            background: rgba(255, 255, 255, 0.96);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 800;
            color: #1a1a1a;
            box-shadow: 0 8px 24px -4px rgba(0,0,0,0.25), 0 4px 12px -2px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            z-index: 20;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 1px solid rgba(255,255,255,0.4);
        }
        .elite-story-badge:hover {
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 12px 32px -4px rgba(236, 80, 117, 0.3);
        }
        .badge-pulse {
            position: relative;
            width: 8px;
            height: 8px;
            background: #EC5075;
            border-radius: 50%;
            box-shadow: 0 0 0 2px rgba(236, 80, 117, 0.2);
        }
        .badge-pulse::after {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 100%; height: 100%;
            border-radius: 50%;
            border: 1px solid #EC5075;
            animation: pulse-ring 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
        }
        @keyframes pulse-ring {
            0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0.8; }
            100% { transform: translate(-50%, -50%) scale(2.8); opacity: 0; }
        }

        /* MOBILE SNAP SCROLL */
        .mobile-snap-scroll {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            gap: 12px;
            padding-bottom: 16px;
            margin: 0 -16px;
            padding-left: 16px;
            padding-right: 16px;
            scrollbar-width: none;
        }
        .mobile-snap-scroll::-webkit-scrollbar { display: none; }
        .mobile-snap-item {
            scroll-snap-align: start;
            flex: 0 0 85%;
            max-width: 340px;
            height: 420px;
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 32px -8px rgba(0,0,0,0.2);
        }
        .mobile-snap-item img { width: 100%; height: 100%; object-fit: cover; }

        /* REVIEWS */
        .rating-bar { height: 6px; background: #f3f4f6; border-radius: 3px; overflow: hidden; }
        .rating-fill { height: 100%; background: linear-gradient(90deg, #10B981, #34D399); border-radius: 3px; }
        .review-card { transition: all 0.3s ease; }
        .review-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px -5px rgba(0,0,0,0.08); }
        .avatar-ring { background: linear-gradient(135deg, #EC5075, #F59E0B); padding: 2px; border-radius: 50%; }

        /* Review Images Gallery */
        .review-images-gallery { display: flex; flex-wrap: wrap; gap: 8px; }
        .review-img-thumb { border: 2px solid transparent; transition: all 0.3s ease; }
        .review-img-thumb:hover { border-color: var(--color-primary); transform: scale(1.02); }

        /* Review Translation & Text */
        .review-translation-toggle {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            color: var(--color-primary);
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 6px;
            background: rgba(236, 80, 117, 0.08);
            padding: 4px 10px;
            border-radius: 20px;
            transition: all 0.2s;
        }
        .review-translation-toggle:hover { background: rgba(236, 80, 117, 0.15); }
        .review-original { display: none; }
        .review-original.visible { display: block; animation: fadeIn 0.3s ease; }
        .review-translated.hidden { display: none; }
        .translation-badge {
            display: inline-block;
            font-size: 0.65rem;
            color: #9ca3af;
            font-style: italic;
            margin-bottom: 4px;
        }

        /* Load More Animation */
        #hiddenReviews {
            overflow: hidden;
            transition: all 0.5s ease-in-out;
            max-height: 0;
            opacity: 0;
        }
        #hiddenReviews.showing {
            opacity: 1;
            /* Max-height set via JS for smooth transition */
        }

/* === REBUILT OPTIMIZED LIGHTBOX CSS === */
#reviewLightbox {
    position: fixed;
    inset: 0; 
    top: 0; left: 0; right: 0; bottom: 0;
    width: 100%; height: 100%;
    z-index: 2147483647; /* Max Int */
    background: rgba(0, 0, 0, 0.96);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
    padding: 0;
    touch-action: none; /* Prevent scroll propagation */
}

#reviewLightbox.active {
    display: flex !important;
    opacity: 1;
}

#lightboxImageContainer {
    position: relative;
    width: 100%;
    height: 100%;
    max-height: 90vh; /* Viewport safe height */
    max-width: 95vw;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

#lightboxImage {
    max-width: 100%;
    max-height: 85dvh;
    width: auto;
    height: auto;
    object-fit: contain;
    transform: scale(0.95);
    transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.2s ease;
    user-select: none;
    -webkit-user-select: none;
    border-radius: 4px;
}

#reviewLightbox.active #lightboxImage {
    transform: scale(1);
}

/* Spinner */
.lightbox-loader {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 40px;
    height: 40px;
    border: 3px solid rgba(255,255,255,0.2);
    border-top-color: var(--color-primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    z-index: -1;
}

/* Controls */
.lightbox-close-btn {
    position: absolute;
    top: max(20px, env(safe-area-inset-top));
    right: 20px;
    width: 44px;
    height: 44px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 50%;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 50;
    transition: background 0.2s;
}
.lightbox-close-btn:hover { background: rgba(255, 255, 255, 0.2); }

.lightbox-nav-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 56px;
    height: 56px;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 50%;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 50;
    transition: all 0.2s;
}
.lightbox-nav-btn:hover { background: var(--color-primary); border-color: var(--color-primary); }
.lightbox-prev { left: 24px; }
.lightbox-next { right: 24px; }

/* Counter */
.lightbox-counter {
    position: absolute;
    top: max(30px, env(safe-area-inset-top));
    left: 20px;
    color: rgba(255, 255, 255, 0.8);
    font-size: 0.9rem;
    font-weight: 500;
    z-index: 50;
    font-variant-numeric: tabular-nums;
}

/* Mobile Specific */
@media (max-width: 768px) {
    #lightboxImage { 
        max-width: 100vw;
        max-height: 80dvh; 
    }
    .lightbox-nav-btn {
        width: 44px;
        height: 44px;
        background: rgba(0,0,0,0.5);
    }
    .lightbox-prev { left: 10px; }
    .lightbox-next { right: 10px; }
}

        /* === PEOPLE ALSO LIKE - ELITE MOBILE CAROUSEL === */
        .pal-scroll {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            gap: 16px;
            padding: 12px 4px 24px;
            margin: 0 -4px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .pal-scroll::-webkit-scrollbar { display: none; }

        .pal-card {
            scroll-snap-align: start;
            flex: 0 0 280px;
            min-width: 280px;
            background: #fff;
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 4px 20px -5px rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.04);
        }
        .pal-card:hover { transform: translateY(-6px); box-shadow: 0 16px 40px -10px rgba(0,0,0,0.18); }
        .pal-card:active { transform: scale(0.98); }

        .pal-card-image { position: relative; height: 180px; overflow: hidden; }
        .pal-card-image img {
            width: 100%; height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
        }
        .pal-card:hover .pal-card-image img { transform: scale(1.08); }
        .pal-card-content { padding: 16px; }

        /* Desktop Grid for PAL */
        @media (min-width: 768px) {
            .pal-scroll {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                overflow: visible;
                scroll-snap-type: none;
                padding: 12px 0;
                margin: 0;
                gap: 24px;
            }
            .pal-card { flex: none; min-width: unset; }
        }

        /* PAL Scroll Dots */
        .pal-dots { display: flex; justify-content: center; gap: 6px; margin-top: 8px; }
        .pal-dot { width: 8px; height: 8px; border-radius: 50%; background: #d1d5db; transition: all 0.3s ease; }
        .pal-dot.active { background: var(--color-primary); width: 24px; border-radius: 4px; }

        /* === ELITE STORY OVERLAY === */
        .story-overlay {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%; height: 100dvh;
            background: #000; z-index: 9999;
            display: none; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            overflow: hidden; will-change: opacity; transform: translateZ(0);
        }
        .story-overlay.show { display: flex; opacity: 1; }

        .story-container {
            width: 100%; height: 100%; height: 100dvh;
            position: relative; overflow: hidden; background: #000;
            backface-visibility: hidden; -webkit-font-smoothing: antialiased;
        }

        @media(min-width: 768px) {
            .story-container {
                width: 450px; height: 90vh; border-radius: 20px;
                box-shadow: 0 0 50px rgba(0,0,0,0.8);
                transform: translateZ(0);
                -webkit-mask-image: -webkit-radial-gradient(white, black);
                mask-image: radial-gradient(white, black);
            }
        }

        .story-media-wrapper {
            width: 100%; height: 100%;
            position: relative; background: #000; z-index: 1; overflow: hidden;
        }

        .story-media-item {
            width: 100%; height: 100%;
            object-fit: cover; object-position: center center;
            position: absolute; top: 0; left: 0;
            opacity: 0;
            transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: opacity;
            min-width: 100%;
            min-height: 100%;
        }
        .story-media-item.active { opacity: 1; z-index: 1; }
        .story-media-item img {
            width: 100%; height: 100%;
            object-fit: cover; object-position: center center;
            display: block;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }
        .story-media-item iframe {
            width: 100% !important;
            height: 100% !important;
            border: none !important;
            display: block;
            position: absolute;
            top: 0; left: 0;
            pointer-events: none !important;
        }

        /* VIDEO PRELOADER */
        .video-preloader {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(135deg, #1a1a1a 0%, #0d0d0d 100%);
            display: flex; align-items: center; justify-content: center;
            z-index: 5;
            opacity: 1;
            transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .video-preloader.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        .preloader-pulse {
            width: 60px; height: 60px;
            border: 3px solid rgba(255,255,255,0.1);
            border-top-color: var(--color-primary);
            border-radius: 50%;
            animation: preloaderSpin 1s linear infinite;
        }
        @keyframes preloaderSpin {
            to { transform: rotate(360deg); }
        }

        .story-ui-top {
            position: absolute; top: 0; left: 0; width: 100%;
            padding: 15px 15px 30px 15px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.6) 0%, transparent 100%);
            z-index: 300; pointer-events: none;
        }

        .story-progress-bar {
            display: flex; gap: 4px; height: 2px;
            margin-bottom: 12px; pointer-events: auto; transform: translateZ(0);
        }
        .progress-segment {
            flex: 1; background: rgba(255,255,255,0.3);
            border-radius: 2px; overflow: hidden; height: 2px;
        }
        .progress-fill {
            width: 100%; height: 100%; background: #fff;
            transform-origin: left; transform: scaleX(0); will-change: transform;
        }

        .story-controls-row { display: flex; justify-content: space-between; align-items: center; padding: 0 5px; }

        .story-brand {
            color: #fff; font-size: 0.8rem; font-weight: 700;
            opacity: 0.95; text-transform: uppercase; letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .story-actions { display: flex; gap: 10px; align-items: center; pointer-events: auto; }

        .story-icon {
            width: 32px; height: 32px;
            display: flex; align-items: center; justify-content: center;
            color: #fff; cursor: pointer;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
            opacity: 0.95; transition: transform 0.2s;
        }
        .story-icon svg { width: 24px; height: 24px; stroke-width: 2px; }
        .story-icon:hover { transform: scale(1.1); }

        .story-nav-zone { position: absolute; top: 0; bottom: 0; z-index: 40; height: 100%; }
        .nav-left { left: 0; width: 30%; }
        .nav-right { right: 0; width: 30%; }
        .nav-center { left: 30%; width: 40%; }

        .story-footer {
            position: absolute; 
            bottom: 0; 
            left: 0; 
            transform: translateY(0);
            width: 100%; 
            max-width: none;
            padding: 20px 20px calc(20px + var(--safe-area-bottom)); 
            z-index: 50;
            /* Premium world-class optimized: black bottom gradient (70% opacity height) */
            background: linear-gradient(to top, rgba(0,0,0,1) 0%, rgba(0,0,0,0.9) 70%, transparent 100%);
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            border: none;
            border-radius: 0;
            display: flex; 
            flex-direction: column; 
            align-items: center;
            text-align: center;
            box-shadow: none; 
            transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
            will-change: transform, opacity;
        }

        .story-footer.hidden { 
            transform: translateY(20px); 
            opacity: 0; 
            pointer-events: none;
        }

        /* === NEW STORY FOOTER HEADER === */
        .story-footer-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            width: 100%;
            margin-bottom: 10px;
            padding: 0 4px;
        }

        .story-footer-rating {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
        }

        .story-footer-description {
            width: 100%;
            text-align: left;
            color: rgba(255, 255, 255, 0.95);
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 15px;
            margin-top: 2px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            white-space: normal;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1.45;
            text-shadow: 0 2px 8px rgba(0,0,0,0.9), 0 1px 2px rgba(0,0,0,0.6);
            font-family: 'Plus Jakarta Sans', sans-serif;
            padding-left: 4px; /* Align with title padding */
        }

        .story-footer-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            font-weight: 700;
            color: #fff;
            line-height: 1;
            text-align: Left;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .story-cta-btn { 
            background: #FFFFFF;
            color: #000000; 
            border: none; 
            font-weight: 800; 
            padding: 16px 24px; 
            border-radius: 12px; 
            width: 100%; 
            font-size: 0.85rem; 
            cursor: pointer; 
            box-shadow: 0 6px 20px rgba(255, 255, 255, 0.15); 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .story-cta-btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.25); 
        }
        .story-cta-btn::after {
            content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0,0,0,0.1), transparent);
            transform: skewX(-20deg); animation: btnShimmer 4s ease-in-out infinite;
        }

        .story-trust { 
            color: #9CA3AF; 
            font-size: 0.65rem; 
            margin-top: 15px; 
            font-weight: 700; 
            text-transform: uppercase;
            letter-spacing: 0.6px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .story-trust svg { 
            color: #10B981; 
            fill: rgba(16, 185, 129, 0.1); 
            stroke: currentColor;
            stroke-width: 2.5px;
            text-shadow: none;
            transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1) 0.4s, transform 0.5s cubic-bezier(0.16, 1, 0.3, 1) 0.4s;
            transform: none;
        }
        .story-footer:not(.hidden) .story-trust { opacity: 0.92; transform: translateY(0); }

        /* === CLIMAX CARD === */
        .climax-phantom-layer {
            position: absolute; inset: 0; width: 100%; height: 100%;
            background-size: cover; background-position: center center;
            background-repeat: no-repeat; z-index: 0;
            transform: scale(1.0); will-change: transform;
            transition: transform 14s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .story-climax-card {
            position: absolute; top:0; left:0; width:100%; height:100%;
            z-index: 100; pointer-events: none; display: flex; flex-direction: column;
            justify-content: flex-end; padding-bottom: 72px; background: transparent;
            opacity: 0; transition: opacity 1.4s cubic-bezier(0.16, 1, 0.3, 1); overflow: hidden;
        }
        .story-climax-card.active { opacity: 1; pointer-events: auto; }
        .story-climax-card.active .climax-phantom-layer {
            transform: scale(1.12) translateY(-8%);
            transition: transform 22s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .climax-gradient-overlay {
            position: absolute; inset: 0; width: 100%; height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.96) 0%, rgba(0,0,0,0.72) 38%, rgba(0,0,0,0.12) 78%, transparent 100%);
            z-index: 1; pointer-events: none;
        }
        .climax-content {
            position: relative; z-index: 2; text-align: center;
            padding: 0 1.5rem; display: flex; flex-direction: column; align-items: center;
        }
        .climax-title {
            color: #fff; font-family: 'Playfair Display';
            font-size: clamp(2rem, 5vw, 2.5rem); margin-bottom: 0.5rem;
            text-shadow: 0 4px 32px rgba(0,0,0,0.95), 0 2px 8px rgba(0,0,0,0.6);
            opacity: 0; transform: translateY(24px);
            transition: opacity 0.9s cubic-bezier(0.16, 1, 0.3, 1) 0.15s, transform 0.9s cubic-bezier(0.16, 1, 0.3, 1) 0.15s;
            letter-spacing: -0.02em; font-weight: 700;
        }
        .climax-badge {
            display: inline-flex; align-items: center; gap: 7px;
            background: rgba(255,255,255,0.16); backdrop-filter: blur(12px);
            border: 1px solid rgba(255,255,255,0.24); padding: 7px 16px;
            border-radius: 50px; margin-bottom: 1.4rem;
            opacity: 0; transform: translateY(18px) scale(0.96);
            transition: opacity 0.85s cubic-bezier(0.16, 1, 0.3, 1) 0.35s, transform 0.85s cubic-bezier(0.16, 1, 0.3, 1) 0.35s;
            box-shadow: 0 8px 36px rgba(0,0,0,0.35), 0 2px 8px rgba(0,0,0,0.2);
        }
        .climax-stars { display: flex; gap: 3px; }
        .climax-stars svg { width: 13px; height: 13px; fill: #FFD700; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3)); }
        .climax-badge-text { color: white; font-size: 0.75rem; font-weight: 700; letter-spacing: 0.6px; text-transform: uppercase; }

        .climax-desc {
            color: rgba(255,255,255,0.97); font-size: 0.9rem; margin-bottom: 2rem;
            line-height: 1.55; font-weight: 500;
            text-shadow: 0 2px 22px rgba(0,0,0,1), 0 1px 4px rgba(0,0,0,0.5);
            max-width: 90%; opacity: 0; transform: translateY(20px);
            transition: opacity 0.9s cubic-bezier(0.16, 1, 0.3, 1) 0.55s, transform 0.9s cubic-bezier(0.16, 1, 0.3, 1) 0.55s;
        }
        .climax-cta {
            background: #fff; color: #000; width: 100%; padding: 1.3rem;
            border-radius: 50px; font-weight: 800; font-size: 0.95rem; border: none;
            box-shadow: 0 0 24px rgba(255,255,255,0.32), 0 4px 12px rgba(0,0,0,0.15);
            cursor: pointer; text-transform: uppercase; letter-spacing: 1.2px;
            transform: scale(0.92) translateY(8px); opacity: 0;
            transition: opacity 0.75s cubic-bezier(0.16, 1, 0.3, 1) 0.75s, transform 0.75s cubic-bezier(0.16, 1, 0.3, 1) 0.75s, box-shadow 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .climax-cta:hover {
            transform: scale(1.01) translateY(-1px);
            box-shadow: 0 0 32px rgba(255,255,255,0.4), 0 6px 16px rgba(0,0,0,0.18);
        }

        .story-climax-card.active .climax-title { opacity: 1; transform: translateY(0); }
        .story-climax-card.active .climax-badge { opacity: 1; transform: translateY(0) scale(1); }
        .story-climax-card.active .climax-desc { opacity: 1; transform: translateY(0); }
        .story-climax-card.active .climax-cta { opacity: 1; transform: scale(1) translateY(0); }

        .story-climax-card .story-trust {
            margin-top: 22px; opacity: 0; transform: translateY(12px);
            transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.9s, transform 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.9s;
        }
        .story-climax-card.active .story-trust { opacity: 0.94; transform: translateY(0); }

        /* MOBILE STICKY BAR */
        .mobile-sticky-bar {
            padding-bottom: calc(12px + var(--safe-area-bottom));
            background: linear-gradient(to top, #fff 90%, rgba(255,255,255,0.95));
        }

        /* === ELITE MOBILE BOOKING SHEET === */
        .mobile-booking-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0);
            z-index: 9998;
            pointer-events: none;
            transition: background 0.4s ease;
        }
        .mobile-booking-overlay.active {
            background: rgba(0, 0, 0, 0.5);
            pointer-events: auto;
        }

        .mobile-booking-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #fff;
            border-radius: 28px 28px 0 0;
            z-index: 9999;
            transform: translateY(100%);
            transition: transform 0.5s cubic-bezier(0.32, 0.72, 0, 1);
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 -20px 60px rgba(0, 0, 0, 0.2);
            padding-bottom: calc(20px + var(--safe-area-bottom));
        }
        .mobile-booking-sheet.active {
            transform: translateY(0);
        }

        .sheet-handle {
            width: 40px;
            height: 5px;
            background: #e5e7eb;
            border-radius: 3px;
            margin: 12px auto 0;
        }

        .sheet-header {
            padding: 20px 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .sheet-price-block {
            display: flex;
            flex-direction: column;
        }

        .sheet-price-main {
            font-size: 2rem;
            font-weight: 800;
            color: #1a1a1a;
            line-height: 1;
        }

        .sheet-price-sub {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 4px;
        }

        .sheet-price-old {
            text-decoration: line-through;
            color: #9ca3af;
            font-size: 0.85rem;
        }

        .sheet-discount-badge {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            font-size: 0.65rem;
            font-weight: 800;
            padding: 3px 8px;
            border-radius: 50px;
        }

        .sheet-close-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #f3f4f6;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .sheet-close-btn:hover {
            background: #e5e7eb;
        }

        .sheet-form {
            padding: 20px;
        }

        .sheet-form-group {
            margin-bottom: 16px;
        }

        .sheet-form-label {
            display: block;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .sheet-select,
        .sheet-input {
            width: 100%;
            padding: 16px;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 14px;
            font-size: 1rem;
            font-weight: 600;
            color: #1a1a1a;
            appearance: none;
            transition: all 0.2s;
        }
        .sheet-select:focus,
        .sheet-input:focus {
            outline: none;
            border-color: var(--color-primary);
            background: #fff;
            box-shadow: 0 0 0 4px rgba(236, 80, 117, 0.1);
        }

        .sheet-select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 14px center;
            background-size: 20px;
            cursor: pointer;
        }

        .sheet-textarea {
            width: 100%;
            padding: 14px;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 14px;
            font-size: 0.9rem;
            color: #1a1a1a;
            resize: none;
            min-height: 80px;
            font-family: inherit;
        }
        .sheet-textarea:focus {
            outline: none;
            border-color: var(--color-primary);
            background: #fff;
        }

        .sheet-summary {
            background: linear-gradient(135deg, #f9fafb, #f3f4f6);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .sheet-summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
        }
        .sheet-summary-row:not(:last-child) {
            border-bottom: 1px dashed #e5e7eb;
        }

        .sheet-summary-label {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .sheet-summary-value {
            font-weight: 700;
            color: #1a1a1a;
        }

        .sheet-summary-total {
            font-size: 1.3rem;
            color: var(--color-primary);
        }

        .sheet-savings {
            color: #10b981;
            font-weight: 600;
        }

        .sheet-submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #EC5075 0%, #d63d62 100%);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(236, 80, 117, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .sheet-submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(236, 80, 117, 0.5);
        }
        .sheet-submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .sheet-trust-badges {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #f3f4f6;
        }

        .sheet-trust-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.7rem;
            color: #6b7280;
        }
        .sheet-trust-item svg {
            width: 14px;
            height: 14px;
            color: #10b981;
        }

        /* Sheet Animation Enhancement */
        .mobile-booking-sheet.active .sheet-form-group {
            animation: sheetSlideIn 0.5s ease-out forwards;
            opacity: 0;
            transform: translateY(10px);
        }
        .mobile-booking-sheet.active .sheet-form-group:nth-child(1) { animation-delay: 0.1s; }
        .mobile-booking-sheet.active .sheet-form-group:nth-child(2) { animation-delay: 0.15s; }
        .mobile-booking-sheet.active .sheet-form-group:nth-child(3) { animation-delay: 0.2s; }
        .mobile-booking-sheet.active .sheet-summary { animation: sheetSlideIn 0.5s ease-out 0.25s forwards; opacity: 0; transform: translateY(10px); }
        .mobile-booking-sheet.active .sheet-submit-btn { animation: sheetSlideIn 0.5s ease-out 0.3s forwards; opacity: 0; transform: translateY(10px); }
        .mobile-booking-sheet.active .sheet-trust-badges { animation: sheetSlideIn 0.5s ease-out 0.35s forwards; opacity: 0; transform: translateY(10px); }

        @keyframes sheetSlideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Hide sticky bar when sheet is active (backup CSS) */
        body:has(.mobile-booking-sheet.active) .mobile-sticky-bar {
            transform: translateY(100%);
            opacity: 0;
            pointer-events: none;
        }

        /* === ELITE REVIEW IMAGES GALLERY === */
        .elite-review-gallery {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            overflow-x: auto;
            padding-bottom: 4px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .elite-review-gallery::-webkit-scrollbar { display: none; }

        .elite-review-thumb {
            flex: 0 0 auto;
            width: 72px;
            height: 72px;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            position: relative;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .elite-review-thumb:hover {
            border-color: var(--color-primary);
            transform: scale(1.05);
        }
        .elite-review-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }
        .elite-review-thumb:hover img {
            transform: scale(1.1);
        }

        .elite-review-thumb.more-photos {
            background: linear-gradient(135deg, rgba(0,0,0,0.6), rgba(0,0,0,0.8));
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .elite-review-thumb.more-photos span {
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
        }

        /* Desktop Review Gallery Grid */
        @media (min-width: 768px) {
            .elite-review-gallery {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
                gap: 10px;
                overflow: visible;
            }
            .elite-review-thumb {
                width: 100%;
                height: 80px;
            }
        }

        /* Featured Review Gallery - Elite Bento Layout */
        .featured-review-gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(2, 72px);
            gap: 8px;
            margin-top: 14px;
        }
        .featured-review-gallery .elite-review-thumb:first-child {
            grid-column: span 2;
            grid-row: span 2;
            height: auto;
        }
        .featured-review-gallery .elite-review-thumb {
            height: auto;
            width: 100%;
        }
        .featured-review-gallery .elite-review-thumb img {
            border-radius: 12px;
        }

        @media (min-width: 768px) {
            .featured-review-gallery {
                grid-template-columns: repeat(5, 1fr);
                grid-template-rows: repeat(2, 85px);
                gap: 10px;
            }
            .featured-review-gallery .elite-review-thumb:first-child {
                grid-column: span 2;
                grid-row: span 2;
            }
        }

        /* === ELITE LOGO STYLE === */
        .elite-logo {
            font-size: 1.2rem;
            font-weight: 900;
            color: #111827;
            font-family: 'Playfair Display', serif;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-decoration: none;
            transition: opacity 0.2s;
        }
        .elite-logo:hover {
            opacity: 0.8;
        }
        .elite-logo span {
            color: var(--color-primary);
        }

        /* DESKTOP BENTO */
        .desktop-bento-grid { display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(2, 220px); gap: 12px; border-radius: 16px; overflow: hidden; }
        .bento-main { grid-column: span 2; grid-row: span 2; }
        .bento-sub { grid-column: span 1; grid-row: span 1; }
        .bento-item { position: relative; overflow: hidden; cursor: pointer; height: 100%; width: 100%; }
        .bento-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.7s ease; }
        .bento-item:hover img { transform: scale(1.06); }

        /* URGENCY STYLES */
        .urgency-pulse {
            display: inline-flex; align-items: center; gap: 6px;
            background: linear-gradient(135deg, #EC5075, #d63d62);
            color: white; font-size: 11px; font-weight: 700;
            padding: 6px 12px; border-radius: 6px;
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        .urgency-pulse::before {
            content: '';
            width: 8px; height: 8px;
            background: white; border-radius: 50%;
            animation: pulse-dot 1.5s ease-in-out infinite;
        }

        .trust-badge {
            display: inline-flex; align-items: center; gap: 6px;
            font-size: 12px; color: #059669;
            background: #ecfdf5; padding: 6px 10px; border-radius: 6px;
        }

        /* === ELITE SUCCESS MODAL === */
        .success-modal-overlay {
            position: fixed; inset: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        .success-modal-overlay.show {
            display: flex;
            opacity: 1;
        }

        .success-modal {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 28px;
            padding: 2.5rem 2rem 2rem;
            max-width: 420px;
            width: 100%;
            text-align: center;
            box-shadow: 0 25px 80px -20px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.8);
            transform: scale(0.9) translateY(20px);
            transition: transform 0.5s var(--ease-spring);
            position: relative;
            overflow: hidden;
        }
        .success-modal-overlay.show .success-modal {
            transform: scale(1) translateY(0);
        }

        .success-modal::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 4px;
            background: linear-gradient(90deg, #10B981, #34D399, #10B981);
            background-size: 200% 100%;
            animation: gradientShift 2s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .success-icon-container {
            width: 90px; height: 90px;
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            box-shadow: 0 15px 40px rgba(16, 185, 129, 0.35);
            position: relative;
        }

        .success-icon-container::after {
            content: '';
            position: absolute;
            inset: -6px;
            border-radius: 50%;
            border: 2px solid rgba(16, 185, 129, 0.3);
            animation: ringPulse 2s ease-out infinite;
        }

        @keyframes ringPulse {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.3); opacity: 0; }
        }

        @keyframes successPop {
            0% { transform: scale(0) rotate(-45deg); }
            50% { transform: scale(1.2) rotate(5deg); }
            70% { transform: scale(0.9) rotate(-3deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .success-modal-overlay.show .success-icon-container {
            animation: successPop 0.8s var(--ease-spring) forwards;
        }

        .success-icon-container svg {
            width: 45px; height: 45px;
            color: white;
            stroke-width: 3;
        }

        .success-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 0.75rem;
            letter-spacing: -0.02em;
        }

        .success-subtitle {
            color: #6b7280;
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .success-experience-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, rgba(236, 80, 117, 0.1) 0%, rgba(194, 24, 91, 0.1) 100%);
            border: 1px solid rgba(236, 80, 117, 0.2);
            color: var(--color-primary);
            padding: 12px 20px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
        }

        .success-experience-badge svg {
            width: 18px; height: 18px;
        }

        .whatsapp-notice {
            background: linear-gradient(135deg, #dcfce7 0%, #d1fae5 100%);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 16px;
            padding: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            text-align: left;
            margin-bottom: 1.5rem;
        }

        .whatsapp-icon {
            width: 40px; height: 40px;
            background: #25D366;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
        }

        .whatsapp-icon svg {
            width: 22px; height: 22px;
            fill: white;
        }

        .whatsapp-text {
            flex: 1;
        }

        .whatsapp-text strong {
            display: block;
            color: #065f46;
            font-size: 0.9rem;
            margin-bottom: 2px;
        }

        .whatsapp-text span {
            color: #047857;
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .success-close-btn {
            background: linear-gradient(135deg, #EC5075 0%, #d63d62 100%);
            color: white;
            border: none;
            width: 100%;
            padding: 1rem;
            border-radius: 14px;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(236, 80, 117, 0.3);
        }

        .success-close-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 28px rgba(236, 80, 117, 0.4);
        }

        /* Loading spinner for form */
        .btn-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            display: inline-block;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Print */
        @media print { .no-print { display: none !important; } }

        /* === MOBILE RESPONSIVE STORY === */
        @media (max-width: 768px) {
            .story-container {
                width: 100vw !important;
                height: 100vh !important;
                height: 100dvh !important;
                border-radius: 0 !important;
                box-shadow: none !important;
                max-width: none !important;
            }

            .story-media-wrapper {
                width: 100vw !important;
                height: 100vh !important;
                height: 100dvh !important;
            }

            .story-media-item,
            .story-media-item iframe,
            .story-media-item img {
                width: 100vw !important;
                height: 100vh !important;
                height: 100dvh !important;
                object-fit: cover !important;
                object-position: center center !important;
            }

            .story-footer { padding-bottom: 40px; padding-top: 85px; }
            .story-climax-card { padding-bottom: 65px; }
        }
    </style>
</head>
<body class="antialiased text-[#1a1a1a]">

    <!-- HEADER -->
    <header role="banner">
        <nav class="border-b border-gray-100 bg-white/95 backdrop-blur-md sticky top-0 z-50 no-print">
            <div class="max-w-7xl mx-auto px-4 h-14 md:h-16 flex items-center justify-between">
                <a href="/" class="elite-logo">Marrakech <span>Top Spot</span></a>
                <button class="p-2 hover:bg-gray-100 rounded-full transition-colors" aria-label="Rechercher">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                </button>
            </div>
        </nav>
    </header>

    <!-- BREADCRUMB -->
    <nav class="max-w-7xl mx-auto px-4 py-3 text-xs text-gray-400 no-print" aria-label="Fil d'Ariane">
        <ol class="flex items-center gap-2 flex-wrap">
            <li><a href="/" class="hover:text-primary transition-colors">Accueil</a></li>
            <svg class="w-3 h-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
            <li><a href="#" class="hover:text-primary transition-colors">Palmeraie</a></li>
            <svg class="w-3 h-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
            <li class="text-gray-700 font-medium">L'Éveil Céleste</li>
        </ol>
    </nav>

    <!-- MAIN CONTENT -->
    <main id="main-content" class="max-w-7xl mx-auto px-4 pb-28 md:pb-12">

        <!-- PAGE HEADER -->
        <header class="mb-5 fade-up" style="animation-delay: 0.1s;">
            <div class="flex flex-wrap items-center gap-2 mb-3">
                <span class="bg-amber-100 text-amber-800 text-[10px] font-bold px-2.5 py-1 rounded-full uppercase tracking-wide border border-amber-200">Best-Seller 2026</span>
                <span class="urgency-pulse">Dernières places</span>
            </div>

            <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-heading font-extrabold text-gray-900 mb-3 leading-tight">
                L'Éveil Céleste : <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-orange-500">Vol Royal au-dessus de la Palmeraie</span>
            </h1>

            <p class="text-sm md:text-base text-gray-600 mb-4 max-w-2xl leading-relaxed">
                Une parenthèse enchantée entre les cimes de l'Atlas et l'oasis millénaire.
            </p>

            <div class="flex flex-wrap items-center gap-3 md:gap-4 text-sm">
                <a href="#reviews" class="flex items-center gap-1.5 hover:opacity-80 transition-opacity">
                    <div class="flex text-yellow-400 text-sm">★★★★★</div>
                    <span class="font-bold text-gray-900">5.0</span>
                    <span class="text-gray-500 underline underline-offset-2">(582 avis vérifiés)</span>
                </a>
                <span class="text-gray-200 hidden sm:inline">|</span>
                <div class="flex items-center gap-1.5 text-gray-500">
                    <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                    <span class="text-xs md:text-sm">Palmeraie (15 min de Marrakech)</span>
                </div>
            </div>
        </header>

        <!-- MEDIA SECTION -->
        <section class="mb-8 md:mb-10 fade-up" style="animation-delay: 0.2s;">
            <!-- DESKTOP BENTO -->
            <div class="hidden md:grid desktop-bento-grid">
                <div class="bento-item bento-main" onclick="StoryManager.open('hotairballoon')">
                    <img src="https://MTSZone.b-cdn.net/Agafay/Agafay0.jpg" alt="L'Éveil Céleste" loading="eager">
                    <div class="absolute inset-0 bg-black/20 hover:bg-black/30 transition-colors flex items-center justify-center">
                        <div class="w-20 h-20 bg-white/95 rounded-full flex items-center justify-center shadow-2xl transition-transform hover:scale-110">
                            <svg class="w-8 h-8 text-primary ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                        </div>
                    </div>
                    <div class="elite-story-badge">
                        <div class="badge-pulse"></div>
                        Voir la Story
                    </div>
                </div>
                <div class="bento-item bento-sub" onclick="StoryManager.open('hotairballoon')"><img src="https://MTSZone.b-cdn.net/Agafay/Vertical/15.jpg" alt="Montgolfière" loading="lazy"></div>
                <div class="bento-item bento-sub" onclick="StoryManager.open('hotairballoon')"><img src="https://MTSZone.b-cdn.net/Agafay/Vertical/14.jpg" alt="Vue Atlas" loading="lazy"></div>
                <div class="bento-item bento-sub" onclick="StoryManager.open('hotairballoon')"><img src="https://MTSZone.b-cdn.net/Agafay/Vertical/17.jpg" alt="Petit-Déjeuner" loading="lazy"></div>
                <div class="bento-item bento-sub" onclick="StoryManager.open('hotairballoon')">
                    <img src="https://MTSZone.b-cdn.net/Agafay/Vertical/Untitled-LiveDoc-(1).jpg" alt="Plus" style="object-position: center bottom;" loading="lazy">
                    <div class="absolute inset-0 bg-black/50 flex items-center justify-center hover:bg-black/60 transition-colors">
                        <span class="text-white font-bold text-sm border border-white/50 px-4 py-2 rounded-full backdrop-blur-sm">+10 Photos</span>
                    </div>
                </div>
            </div>

            <!-- MOBILE CAROUSEL -->
            <div class="md:hidden">
                <div class="mobile-snap-scroll" id="mobileGallery">
                    <div class="mobile-snap-item" onclick="StoryManager.open('hotairballoon')">
                        <img src="https://MTSZone.b-cdn.net/Agafay/Agafay0.jpg" alt="L'Éveil Céleste" loading="eager">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/20 flex items-center justify-center">
                            <div class="w-16 h-16 bg-white/95 rounded-full flex items-center justify-center shadow-xl">
                                <svg class="w-7 h-7 text-primary ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            </div>
                        </div>
                    <div class="elite-story-badge">
                        <div class="badge-pulse"></div>
                        Voir la Story
                    </div>
                    </div>
                    <div class="mobile-snap-item" onclick="StoryManager.open('hotairballoon')">
                        <img src="https://MTSZone.b-cdn.net/Agafay/Vertical/15.jpg" alt="Montgolfière" loading="lazy">
                    </div>
                    <div class="mobile-snap-item" onclick="StoryManager.open('hotairballoon')">
                        <img src="https://MTSZone.b-cdn.net/Agafay/Vertical/14.jpg" alt="Vue" loading="lazy">
                    </div>
                    <div class="mobile-snap-item" onclick="StoryManager.open('hotairballoon')">
                        <img src="https://MTSZone.b-cdn.net/Agafay/Vertical/17.jpg" alt="Petit-Déjeuner" loading="lazy">
                        <div class="absolute inset-0 bg-black/50 flex items-center justify-center">
                            <span class="text-white font-medium text-sm border border-white/50 px-3 py-1.5 rounded-full backdrop-blur-sm">+8 Photos</span>
                        </div>
                    </div>
                </div>
                <div class="flex justify-center gap-1.5" id="galleryDots">
                    <div class="w-6 h-1.5 rounded-full bg-primary transition-all"></div>
                    <div class="w-1.5 h-1.5 rounded-full bg-gray-300 transition-all"></div>
                    <div class="w-1.5 h-1.5 rounded-full bg-gray-300 transition-all"></div>
                    <div class="w-1.5 h-1.5 rounded-full bg-gray-300 transition-all"></div>
                </div>
            </div>
        </section>

        <!-- CONTENT GRID -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12 fade-up" style="animation-delay: 0.3s;">

            <!-- LEFT COLUMN -->
            <article class="lg:col-span-2">

                <!-- HERO DESCRIPTION -->
                <div class="mb-8">
                    <p class="text-base md:text-lg text-gray-700 leading-relaxed mb-4">
                        <strong class="text-gray-900">Ce n'est pas simplement un vol, c'est un moment de grâce suspendu dans le temps.</strong>
                    </p>
                    <p class="text-sm md:text-base text-gray-600 leading-relaxed">
                        Imaginez le silence absolu, brisé seulement par le souffle de la flamme. Alors que Marrakech s'éveille doucement, vous vous élevez vers le ciel. Sous vos pieds, le contraste saisissant de la Palmeraie verdoyante, des villages rouges et des montagnes de l'Atlas enneigées. Après une heure de contemplation aérienne, l'atterrissage se fait en douceur pour célébrer cette aventure autour d'un petit-déjeuner berbère authentique.
                    </p>
                </div>

                <!-- SOCIAL PROOF BANNER -->
                <div class="bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-100/50 rounded-2xl p-4 mb-8 flex items-center gap-4">
                    <div class="flex -space-x-2 flex-shrink-0">
                        <div class="w-9 h-9 md:w-10 md:h-10 rounded-full bg-blue-500 border-2 border-white flex items-center justify-center text-white text-xs font-bold shadow-sm">S</div>
                        <div class="w-9 h-9 md:w-10 md:h-10 rounded-full bg-green-500 border-2 border-white flex items-center justify-center text-white text-xs font-bold shadow-sm">T</div>
                        <div class="w-9 h-9 md:w-10 md:h-10 rounded-full bg-purple-500 border-2 border-white flex items-center justify-center text-white text-xs font-bold shadow-sm">M</div>
                        <div class="w-9 h-9 md:w-10 md:h-10 rounded-full bg-gray-100 border-2 border-white flex items-center justify-center text-gray-600 text-[10px] font-bold shadow-sm">+12</div>
                    </div>
                    <div class="min-w-0">
                        <p class="text-sm font-semibold text-gray-900 truncate">18 personnes réservent en ce moment</p>
                        <p class="text-xs text-gray-500">Dernière réservation il y a 12 min</p>
                    </div>
                </div>

                <!-- EXPERIENCE HIGHLIGHTS -->
                <section class="mb-10 bg-gradient-to-br from-primary/5 via-white to-orange-50 rounded-2xl p-5 md:p-6 border border-primary/10">
                    <h2 class="font-heading font-bold text-lg md:text-xl mb-5 text-gray-900">Ce Qui Rend Cette Expérience Unique</h2>
                    <div class="space-y-4">
                        <div class="flex gap-4 items-start bg-white rounded-xl p-4 shadow-sm border border-gray-50">
                            <div class="w-12 h-12 bg-gradient-to-br from-blue-100 to-sky-100 rounded-xl flex items-center justify-center flex-shrink-0 text-2xl shadow-sm">🎈</div>
                            <div>
                                <h3 class="font-bold text-gray-900">Vol Garanti d'1 Heure</h3>
                                <p class="text-sm text-gray-600 mt-0.5">Profitez pleinement du paysage (pas de vol écourté). Survol royal.</p>
                            </div>
                        </div>
                        <div class="flex gap-4 items-start bg-white rounded-xl p-4 shadow-sm border border-gray-50">
                            <div class="w-12 h-12 bg-gradient-to-br from-orange-100 to-amber-100 rounded-xl flex items-center justify-center flex-shrink-0 text-2xl shadow-sm">☕</div>
                            <div>
                                <h3 class="font-bold text-gray-900">Petit-Déjeuner Traditionnel</h3>
                                <p class="text-sm text-gray-600 mt-0.5">Thé à la menthe et délices berbères sous la tente caïdale après le vol.</p>
                            </div>
                        </div>
                        <div class="flex gap-4 items-start bg-white rounded-xl p-4 shadow-sm border border-gray-50">
                            <div class="w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center flex-shrink-0 text-2xl shadow-sm">🚐</div>
                            <div>
                                <h3 class="font-bold text-gray-900">Transfert VIP Inclus</h3>
                                <p class="text-sm text-gray-600 mt-0.5">Prise en charge et retour confortables à votre hôtel (Zone Marrakech).</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- INCLUSIONS -->
                <section class="mb-10">
                    <h2 class="font-heading font-bold text-lg md:text-xl mb-5 text-gray-900">Ce Qui Est Inclus</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <div class="flex items-center gap-3 bg-green-50 rounded-lg p-3 border border-green-100">
                            <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                            <span class="text-sm font-medium text-gray-700">Vol Montgolfière (1h)</span>
                        </div>
                        <div class="flex items-center gap-3 bg-green-50 rounded-lg p-3 border border-green-100">
                            <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                            <span class="text-sm font-medium text-gray-700">Transfert A/R VIP</span>
                        </div>
                        <div class="flex items-center gap-3 bg-green-50 rounded-lg p-3 border border-green-100">
                            <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                            <span class="text-sm font-medium text-gray-700">Petit-Déjeuner Berbère</span>
                        </div>
                        <div class="flex items-center gap-3 bg-green-50 rounded-lg p-3 border border-green-100">
                            <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                            <span class="text-sm font-medium text-gray-700">Certificat de Vol</span>
                        </div>
                        <div class="flex items-center gap-3 bg-green-50 rounded-lg p-3 border border-green-100">
                            <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                            <span class="text-sm font-medium text-gray-700">Vue Panoramique Atlas</span>
                        </div>
                        <div class="flex items-center gap-3 bg-green-50 rounded-lg p-3 border border-green-100">
                            <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                            <span class="text-sm font-medium text-gray-700">Assurance Incluse</span>
                        </div>
                    </div>
                </section>

                <!-- REVIEWS SECTION -->
                <section id="reviews" class="mb-10">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h2 class="font-heading font-bold text-lg md:text-xl text-gray-900">Ce Qu'ils En Disent</h2>
                            <p class="text-xs text-gray-500 mt-1">Retours authentiques de nos voyageurs</p>
                        </div>
                        <span class="trust-badge text-[10px]">
                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                            Vérifiés
                        </span>
                    </div>

                    <!-- RATING SUMMARY -->
                    <div class="bg-white border border-gray-100 rounded-2xl p-5 md:p-6 mb-6 shadow-sm">
                        <div class="flex flex-col sm:flex-row gap-6 sm:gap-8 items-center">
                            <div class="text-center sm:text-left flex-shrink-0">
                                <div class="text-5xl font-bold text-gray-900 mb-1">5.0</div>
                                <div class="flex text-yellow-400 justify-center sm:justify-start mb-1">★★★★★</div>
                                <p class="text-sm text-gray-500 font-medium">327 avis vérifiés</p>
                                <div class="flex items-center justify-center sm:justify-start gap-2 mt-2">
                                    <span class="text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-semibold">Excellent</span>
                                    <span class="text-[10px] text-gray-400">Top 1% Marrakech</span>
                                </div>
                            </div>
                            <div class="flex-1 w-full space-y-2">
                                <div class="flex items-center gap-3"><span class="text-xs text-gray-500 w-6">5★</span><div class="rating-bar flex-1"><div class="rating-fill" style="width: 92%"></div></div><span class="text-xs text-gray-400 w-10">92%</span></div>
                                <div class="flex items-center gap-3"><span class="text-xs text-gray-500 w-6">4★</span><div class="rating-bar flex-1"><div class="rating-fill" style="width: 6%"></div></div><span class="text-xs text-gray-400 w-10">6%</span></div>
                                <div class="flex items-center gap-3"><span class="text-xs text-gray-500 w-6">3★</span><div class="rating-bar flex-1"><div class="rating-fill" style="width: 1%"></div></div><span class="text-xs text-gray-400 w-10">1%</span></div>
                                <div class="flex items-center gap-3"><span class="text-xs text-gray-500 w-6">2★</span><div class="rating-bar flex-1"><div class="rating-fill" style="width: 0%"></div></div><span class="text-xs text-gray-400 w-10">0%</span></div>
                                <div class="flex items-center gap-3"><span class="text-xs text-gray-500 w-6">1★</span><div class="rating-bar flex-1"><div class="rating-fill" style="width: 1%"></div></div><span class="text-xs text-gray-400 w-10">1%</span></div>
                            </div>
                        </div>
                        <!-- Recent Activity Indicator -->
                        <div class="mt-4 pt-4 border-t border-gray-100 flex flex-wrap items-center justify-between gap-3">
                            <div class="flex items-center gap-2 text-xs text-gray-500">
                                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                                <span>34 nouveaux avis ce mois</span>
                            </div>
                            <div class="flex items-center gap-3 text-xs text-gray-400">
                                <span class="flex items-center gap-1">
                                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                                    100% recommandent
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- REVIEW CARDS -->
                    <div class="space-y-4" id="reviewsContainer">

                        <!-- Review 1: Marine (France) -->
                        <article class="review-card bg-white border border-gray-100 rounded-xl p-4 shadow-sm">
                            <div class="flex items-start gap-3">
                                <div class="avatar-ring flex-shrink-0">
                                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold text-sm">M</div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex flex-wrap justify-between items-center gap-2 mb-1">
                                        <div class="flex items-center gap-2">
                                            <span class="font-semibold text-sm">Marine</span>
                                            <img src="https://flagcdn.com/w20/fr.png" alt="France" class="w-4 h-3 rounded-sm object-cover">
                                            <span class="text-[9px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium">Vérifié</span>
                                        </div>
                                        <span class="text-[10px] text-gray-400">24 janvier 2026</span>
                                    </div>
                                    <div class="flex text-yellow-400 mb-2 text-xs">★★★★★</div>
                                    <p class="text-gray-700 text-sm">"Nous avons vécu un moment incroyable pour notre baptême en montgolfière, face à un merveilleux lever de soleil. C’était une surprise pour les 40 ans de mon conjoint, et tout a été absolument parfait ! Un immense merci à notre chauffeur, qui a été parfait et adorable tout au long de l’activité. Merci également à Angel, notre guide de montgolfière, grâce à qui nous avons beaucoup rigolé en plein vol ! Le petit-déjeuner était également génial, et toute l’équipe sur place nous a accueillis chaleureusement, avec beaucoup de sourires et de bonne humeur. Nous avons passé un moment merveilleux et fait de superbes rencontres grâce à cette expérience. Si vous avez le moindre doute, n’hésitez plus : c’est une expérience à faire absolument !"</p>
                                    
                                    <!-- Elite Review Images Gallery -->
                                    <div class="featured-review-gallery">
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 0)">
                                            <img src="https://cdn.getyourguide.com/img/review/9e8d2da28ff7b61260fcb2df188ee26abf2ba6a7b7f3d76d5e600c7b0c37908b.jpg/53.jpg" alt="Review photo 1" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 1)">
                                            <img src="https://cdn.getyourguide.com/img/review/65c7fee8058da3429d4c17417b67b392896be48f5fadf4fa8491d06ccd9e257f.jpg/53.jpg" alt="Review photo 2" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 2)">
                                            <img src="https://cdn.getyourguide.com/img/review/59d1f2c785b137b0a7be7e48eab482e10ac13850c30e5a0454d48af2afb85d25.jpg/53.jpg" alt="Review photo 3" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 3)">
                                            <img src="https://cdn.getyourguide.com/img/review/b63976517f313edc72dfd1b605f1fef80585046bae5c4fd63027634520b15124.jpg/53.jpg" alt="Review photo 4" loading="lazy">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </article>

                        <!-- Review 2: Voyageur·se (Canada) -->
                        <article class="review-card bg-white border border-gray-100 rounded-xl p-4 shadow-sm">
                            <div class="flex items-start gap-3">
                                <div class="avatar-ring flex-shrink-0">
                                    <div class="w-10 h-10 bg-gradient-to-br from-red-500 to-white rounded-full flex items-center justify-center text-gray-700 font-bold text-sm" style="border: 1px solid #e5e7eb;">V</div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex flex-wrap justify-between items-center gap-2 mb-1">
                                        <div class="flex items-center gap-2">
                                            <span class="font-semibold text-sm">Voyageur·se</span>
                                            <img src="https://flagcdn.com/w20/ca.png" alt="Canada" class="w-4 h-3 rounded-sm object-cover">
                                            <span class="text-[9px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium">Vérifié</span>
                                        </div>
                                        <span class="text-[10px] text-gray-400">29 janvier 2026</span>
                                    </div>
                                    <div class="flex text-yellow-400 mb-2 text-xs">★★★★★</div>
                                    <p class="text-gray-700 text-sm">"Notre guide a été incroyablement généreux de son temps et nous a même préparé une vidéo souvenir de notre aventure en montgolfière. Malgré le temps froid de cette période de l’année, nous avons été accueillis chaleureusement et avons savouré un délicieux petit déjeuner."</p>
                                    
                                    <div class="elite-review-gallery">
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 0)">
                                            <img src="https://cdn.getyourguide.com/img/review/e99f7ef2290f8bf5ab3bdab4a54ac18cf4e2c4b82aff4976822c554ed1889cb7.jpg/53.jpg" alt="Review photo 1" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 1)">
                                            <img src="https://cdn.getyourguide.com/img/review/50da3c153909150d41113fd3dc09122cb772accd5e3af10aa66b65aa7162ec68.jpg/53.jpg" alt="Review photo 2" loading="lazy">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </article>

                        <!-- Review 3: Vincent (Belgique) -->
                        <article class="review-card bg-white border border-gray-100 rounded-xl p-4 shadow-sm">
                            <div class="flex items-start gap-3">
                                <div class="avatar-ring flex-shrink-0">
                                    <div class="w-10 h-10 bg-gradient-to-br from-yellow-500 to-black rounded-full flex items-center justify-center text-white font-bold text-sm">V</div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex flex-wrap justify-between items-center gap-2 mb-1">
                                        <div class="flex items-center gap-2">
                                            <span class="font-semibold text-sm">Vincent</span>
                                            <img src="https://flagcdn.com/w20/be.png" alt="Belgique" class="w-4 h-3 rounded-sm object-cover">
                                            <span class="text-[9px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium">Vérifié</span>
                                        </div>
                                        <span class="text-[10px] text-gray-400">1 février 2026</span>
                                    </div>
                                    <div class="flex text-yellow-400 mb-2 text-xs">★★★★★</div>
                                    <p class="text-gray-700 text-sm">"la pilote Noor était vraiment très sympa. on a eu 45 min de vol en montgolfière suivis d'un déjeuner berbère sous tente vraiment top."</p>
                                    
                                    <div class="elite-review-gallery">
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 0)">
                                            <img src="https://cdn.getyourguide.com/img/review/c1fa8f32eaca14688e42b0bfdd3dd009263a25c25c78b3937b2f2379b5a7ad23.jpg/53.jpg" alt="Review photo 1" loading="lazy">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </article>
                    </div>

                    <!-- HIDDEN REVIEWS (Load More) -->
                    <div class="space-y-4" id="hiddenReviews">

                        <!-- Review 4: PROVOST (France) -->
                        <article class="review-card bg-white border border-gray-100 rounded-xl p-4 shadow-sm">
                            <div class="flex items-start gap-3">
                                <div class="avatar-ring flex-shrink-0">
                                    <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold text-sm">P</div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex flex-wrap justify-between items-center gap-2 mb-1">
                                        <div class="flex items-center gap-2">
                                            <span class="font-semibold text-sm">PROVOST</span>
                                            <img src="https://flagcdn.com/w20/fr.png" alt="France" class="w-4 h-3 rounded-sm object-cover">
                                            <span class="text-[9px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium">Vérifié</span>
                                        </div>
                                        <span class="text-[10px] text-gray-400">19 décembre 2025</span>
                                    </div>
                                    <div class="flex text-yellow-400 mb-2 text-xs">★★★★★</div>
                                    <p class="text-gray-700 text-sm">"Une expérience inoubliable ! Le vol en montgolfière était tout simplement magique. Un immense merci à notre chauffeur qui nous a accompagnés tout au long de l’activité : il a été un véritable guide, toujours présent, attentif et passionné. Sa gentillesse, sa bienveillance et ses explications ont vraiment enrichi l’expérience. On se sent en confiance du début à la fin. Merci encore pour ce moment exceptionnel !"</p>
                                    
                                    <div class="elite-review-gallery">
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 0)">
                                            <img src="https://cdn.getyourguide.com/img/review/968d4aed959deded2c7fd71e040666889e46652507d82c2bc5f38618ef6d26fd.jpg/53.jpg" alt="Review photo 1" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 1)">
                                            <img src="https://cdn.getyourguide.com/img/review/fdcf9cfeced02ba9aed1c977e7591cd062b9bc1e3d69f94f17bcf1c88e024172.jpg/53.jpg" alt="Review photo 2" loading="lazy">
                                        </div>
                                    </div>

                                    <!-- Organizer Reply -->
                                    <div class="mt-3 bg-gray-50 rounded-lg p-3 border border-gray-100">
                                        <p class="text-xs font-bold text-gray-900 mb-1">Réponse de l'organisateur</p>
                                        <p class="text-xs text-gray-600 italic">"Merci beaucoup pour vos gentils mots! Nous sommes ravis d’apprendre que vous avez apprécié votre vol en montgolfière à Marrakech 🎈 Au plaisir de vous revoir bientôt ! 😊🙏"</p>
                                    </div>
                                </div>
                            </div>
                        </article>

                        <!-- Review 5: Rabillé (Maroc) -->
                        <article class="review-card bg-white border border-gray-100 rounded-xl p-4 shadow-sm">
                            <div class="flex items-start gap-3">
                                <div class="avatar-ring flex-shrink-0">
                                    <div class="w-10 h-10 bg-gradient-to-br from-red-600 to-green-600 rounded-full flex items-center justify-center text-white font-bold text-sm">R</div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex flex-wrap justify-between items-center gap-2 mb-1">
                                        <div class="flex items-center gap-2">
                                            <span class="font-semibold text-sm">Rabillé</span>
                                            <img src="https://flagcdn.com/w20/ma.png" alt="Maroc" class="w-4 h-3 rounded-sm object-cover">
                                            <span class="text-[9px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium">Vérifié</span>
                                        </div>
                                        <span class="text-[10px] text-gray-400">31 janvier 2026</span>
                                    </div>
                                    <div class="flex text-yellow-400 mb-2 text-xs">★★★★★</div>
                                    <p class="text-gray-700 text-sm">"Une expérience inoubliable le décollage était très doux ainsi que l atterrissage un ciel bien dégagé qui nous a permis de bien voir le paysage le petit déjeuner était parfait si il y a quelque chose à améliorer je dirais peut-être l attente du début on nous a pris en charge à l hôtel à 6h et l activité à commencé à 8h30 mais bon nous avons eu le droit au petit café croissant alors bon ça passe"</p>
                                    
                                    <div class="elite-review-gallery">
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 0)">
                                            <img src="https://cdn.getyourguide.com/img/review/564c4a4ca7175b562fc28fa1f7fdbf576621c5d9ad93b78badaa494f7f1ac84b.jpg/53.jpg" alt="Review photo 1" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 1)">
                                            <img src="https://cdn.getyourguide.com/img/review/eb542e71d4863c84465c02d9d701800483c94adbdc8b3a61d01b80e61cdd1f41.jpg/53.jpg" alt="Review photo 2" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 2)">
                                            <img src="https://cdn.getyourguide.com/img/review/a47f922d4c89365a7d9cf421084faa1594b26d836df9e1c21fabbd85a695b5c3.jpg/53.jpg" alt="Review photo 3" loading="lazy">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </article>

                        <!-- Review 6: Voyageur·se GetYourGuide (France) -->
                        <article class="review-card bg-white border border-gray-100 rounded-xl p-4 shadow-sm">
                            <div class="flex items-start gap-3">
                                <div class="avatar-ring flex-shrink-0">
                                    <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm">G</div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex flex-wrap justify-between items-center gap-2 mb-1">
                                        <div class="flex items-center gap-2">
                                            <span class="font-semibold text-sm">Voyageur·se GetYourGuide</span>
                                            <img src="https://flagcdn.com/w20/fr.png" alt="France" class="w-4 h-3 rounded-sm object-cover">
                                            <span class="text-[9px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium">Vérifié</span>
                                        </div>
                                        <span class="text-[10px] text-gray-400">2 février 2026</span>
                                    </div>
                                    <div class="flex text-yellow-400 mb-2 text-xs">★★★★★</div>
                                    <p class="text-gray-700 text-sm">"c'est une activité merveilleuse. tout s est parfaitement bien déroulé. prise en charge, petit déjeuner berbère avec serveurs aimables, pilote super fun, atterrissage en douceur. le staff de la nacelle qui fait tout pour que le décollage et l atterrissage se passe bien. bravo à toute l équipe"</p>
                                </div>
                            </div>
                        </article>

                        <!-- Review 7: Stephane (Autriche) -->
                        <article class="review-card bg-white border border-gray-100 rounded-xl p-4 shadow-sm">
                            <div class="flex items-start gap-3">
                                <div class="avatar-ring flex-shrink-0">
                                    <div class="w-10 h-10 bg-gradient-to-br from-red-500 to-white rounded-full flex items-center justify-center text-gray-700 font-bold text-sm" style="border: 1px solid #e5e7eb;">S</div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex flex-wrap justify-between items-center gap-2 mb-1">
                                        <div class="flex items-center gap-2">
                                            <span class="font-semibold text-sm">Stephane</span>
                                            <img src="https://flagcdn.com/w20/at.png" alt="Autriche" class="w-4 h-3 rounded-sm object-cover">
                                            <span class="text-[9px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium">Vérifié</span>
                                        </div>
                                        <span class="text-[10px] text-gray-400">1 février 2026</span>
                                    </div>
                                    <div class="flex text-yellow-400 mb-2 text-xs">★★★★★</div>
                                    <p class="text-gray-700 text-sm">"Merveilleux ! Nous avons eu la chance de voir le lever du soleil. Notre pilote n’a pas été avare en explications, elles ont été très intéressantes."</p>
                                    
                                    <div class="elite-review-gallery">
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 0)">
                                            <img src="https://cdn.getyourguide.com/img/review/d7cd876cf297cfbb8c51de6da495c75de558ea8a6299c6a51f28a284e0e6f4f1.jpg/53.jpg" alt="Review photo 1" loading="lazy">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </article>

                        <!-- Review 8: Audrey (France) -->
                        <article class="review-card bg-white border border-gray-100 rounded-xl p-4 shadow-sm">
                            <div class="flex items-start gap-3">
                                <div class="avatar-ring flex-shrink-0">
                                    <div class="w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm">A</div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex flex-wrap justify-between items-center gap-2 mb-1">
                                        <div class="flex items-center gap-2">
                                            <span class="font-semibold text-sm">Audrey</span>
                                            <img src="https://flagcdn.com/w20/fr.png" alt="France" class="w-4 h-3 rounded-sm object-cover">
                                            <span class="text-[9px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium">Vérifié</span>
                                        </div>
                                        <span class="text-[10px] text-gray-400">1 février 2026</span>
                                    </div>
                                    <div class="flex text-yellow-400 mb-2 text-xs">★★★★★</div>
                                    <p class="text-gray-700 text-sm">"C'était Génial nous avons passé 1 très bon moment. Même si on s'est levé tôt 5h du mat ça vaut vraiment le coup 😍😊 Dès notre arrivée nous avons eu droit à 1 viennoiserie et boisson chaude ou froide direction les montgolfières avec Mustapha qui était super 👍 Je recommande vivement cette expérience.Puis nous avons eu aussi le petit déjeuner berbère excellent.Merci encore pour ce merveilleux moment. Et dédicace au chauffeur Aminé qui était très sympa et souriant."</p>
                                    
                                    <div class="elite-review-gallery">
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 0)">
                                            <img src="https://cdn.getyourguide.com/img/review/8fff7643e5b72501588362e9b7d5f36215236e8f5b1f276940d616ef97994075.jpg/53.jpg" alt="Review photo 1" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 1)">
                                            <img src="https://cdn.getyourguide.com/img/review/c7337ebfacf3d5e28238227cece8aab88a7cb01569add7eb29db6703e1d00e37.jpg/53.jpg" alt="Review photo 2" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 2)">
                                            <img src="https://cdn.getyourguide.com/img/review/f40346fbb768a5cde626db6a67246483f530a5220948c2fe85c914fba74f3176.jpg/53.jpg" alt="Review photo 3" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 3)">
                                            <img src="https://cdn.getyourguide.com/img/review/89b1ed284065847a3420c55040eaa7161f0e7e4eaa1bdf2919d37ee0f15c5f54.jpg/53.jpg" alt="Review photo 4" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 4)">
                                            <img src="https://cdn.getyourguide.com/img/review/66c16817a0571824f92b77cf2c656e1680d04b2afc18cb6a20a36d08ff228bf8.jpg/53.jpg" alt="Review photo 5" loading="lazy">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </article>

                        <!-- Review 9: Angeline (France) -->
                        <article class="review-card bg-white border border-gray-100 rounded-xl p-4 shadow-sm">
                            <div class="flex items-start gap-3">
                                <div class="avatar-ring flex-shrink-0">
                                    <div class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm">A</div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex flex-wrap justify-between items-center gap-2 mb-1">
                                        <div class="flex items-center gap-2">
                                            <span class="font-semibold text-sm">Angeline</span>
                                            <img src="https://flagcdn.com/w20/fr.png" alt="France" class="w-4 h-3 rounded-sm object-cover">
                                            <span class="text-[9px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium">Vérifié</span>
                                        </div>
                                        <span class="text-[10px] text-gray-400">3 février 2026</span>
                                    </div>
                                    <div class="flex text-yellow-400 mb-2 text-xs">★★★★★</div>
                                    <p class="text-gray-700 text-sm">"Merci à Nour notre capitaine pour ce beau moment!! Un acceuil exceptionnel et un petit déjeuner délicieux et très copieux! Tout était parfait!"</p>
                                    
                                    <div class="elite-review-gallery">
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 0)">
                                            <img src="https://cdn.getyourguide.com/img/review/1c911c02b7695857d773ebca8a5f7b760631570f64daf781c6206e1b1054e2d4.jpg/53.jpg" alt="Review photo 1" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 1)">
                                            <img src="https://cdn.getyourguide.com/img/review/414dbdb66839791d628423a7292bf55376ce257968c5d8b7a17bbb6f8b29ac88.jpg/53.jpg" alt="Review photo 2" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 2)">
                                            <img src="https://cdn.getyourguide.com/img/review/73f97c4c95cdc75946440516e1a4aae950df5348f790fa4288d14af7e475c27a.jpg/53.jpg" alt="Review photo 3" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 3)">
                                            <img src="https://cdn.getyourguide.com/img/review/0fa0fd70ea01e2f6bfce63198037d117d2da3190ca706cede13c57a53e59378d.jpg/53.jpg" alt="Review photo 4" loading="lazy">
                                        </div>
                                        <div class="elite-review-thumb" onclick="openReviewLightbox(this, 4)">
                                            <img src="https://cdn.getyourguide.com/img/review/53a2adcc4f9d14506ad0b7af1ed030d614090489504ccd91c1c86fda5e80a39b.jpg/53.jpg" alt="Review photo 5" loading="lazy">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </article>

                    </div>
                    
                    <!-- Load More Button -->
                    <button id="loadMoreReviews" class="mt-6 w-full text-center text-primary font-semibold text-sm py-4 border-2 border-primary/20 rounded-xl hover:bg-primary/5 hover:border-primary/40 transition-all flex items-center justify-center gap-2">
                        <svg class="w-4 h-4 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                        <span>Voir plus d'avis</span>
                        <span class="text-xs text-gray-400 font-normal ml-1" id="reviewCountLabel">(6 sur 582 affichés)</span>
                    </button>

                    <!-- REVIEW STATS BAR -->
                    <div class="mt-6 p-4 bg-gradient-to-r from-gray-50 to-white border border-gray-100 rounded-xl">
                        <div class="flex flex-wrap items-center justify-center gap-4 md:gap-8 text-center">
                            <div>
                                <div class="text-2xl font-bold text-gray-900">327</div>
                                <div class="text-[10px] text-gray-500 uppercase tracking-wider">Avis Total</div>
                            </div>
                            <div class="w-px h-8 bg-gray-200 hidden md:block"></div>
                            <div>
                                <div class="text-2xl font-bold text-green-600">98%</div>
                                <div class="text-[10px] text-gray-500 uppercase tracking-wider">Recommandent</div>
                            </div>
                            <div class="w-px h-8 bg-gray-200 hidden md:block"></div>
                            <div>
                                <div class="text-2xl font-bold text-amber-500">4.8</div>
                                <div class="text-[10px] text-gray-500 uppercase tracking-wider">Note Moy.</div>
                            </div>
                        </div>
                    </div>
                </section>
          </article>

            <!-- RIGHT COLUMN: ELITE BOOKING WIDGET -->
            <aside class="hidden lg:block relative no-print">
                <div class="sticky-widget bg-white border border-gray-200 rounded-2xl shadow-xl overflow-hidden">
                    <!-- Price Header -->
                    <div class="bg-gradient-to-r from-primary to-primary-dark p-5 text-white">
                        <div class="flex items-baseline gap-2">
                            <span class="text-4xl font-heading font-bold">1200 DH</span>
                            <span class="text-white/80 text-sm">/ personne</span>
                        </div>
                    </div>

                    <!-- Urgency -->
                    <div class="bg-pink-50 border-b border-pink-100 p-3 flex items-center gap-3">
                        <div class="w-2 h-2 bg-primary rounded-full pulse-dot"></div>
                        <p class="text-sm text-primary-dark"><strong>3 places</strong> restantes pour demain</p>
                    </div>

                    <!-- ELITE BOOKING FORM -->
                    <form id="eliteBookingForm" class="p-5 space-y-4">
                        <!-- Participants -->
                        <div>
                            <label class="block text-[10px] text-gray-500 uppercase tracking-wide font-semibold mb-1.5">Nombre de participants</label>
                            <select name="participants" id="participants" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all appearance-none cursor-pointer" style="background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2224%22 height=%2224%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%239ca3af%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22><path d=%22M6 9l6 6 6-6%22/></svg>'); background-repeat: no-repeat; background-position: right 12px center; background-size: 20px;">
                                <option value="1">1 Adulte</option>
                                <option value="2" selected>2 Adultes</option>
                                <option value="3">3 Adultes</option>
                                <option value="4">4 Adultes</option>
                                <option value="5">5 Adultes</option>
                                <option value="6">6+ Adultes (groupe)</option>
                            </select>
                        </div>

                        <!-- Date -->
                        <div>
                            <label class="block text-[10px] text-gray-500 uppercase tracking-wide font-semibold mb-1.5">Date souhaitée</label>
                            <input type="date" name="date" id="bookingDate" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all cursor-pointer">
                        </div>

                        <!-- Special Requests -->
                        <div>
                            <label class="block text-[10px] text-gray-500 uppercase tracking-wide font-semibold mb-1.5">Demandes spéciales (optionnel)</label>
                            <textarea name="requests" id="specialRequests" rows="2" placeholder="Allergies, anniversaire, etc." class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all resize-none"></textarea>
                        </div>

                        <!-- Price Summary -->
                        <div class="bg-gray-50 rounded-xl p-4 border border-gray-100">
                            <div class="flex justify-between items-center text-sm mb-2">
                                <span class="text-gray-600">1200 DH × <span id="participantCount">2</span> adultes</span>
                                <span class="font-semibold text-gray-900" id="subtotalPrice">2 400 DH</span>
                            </div>
                            <div class="border-t border-gray-200 mt-3 pt-3 flex justify-between items-center">
                                <span class="font-bold text-gray-900">Total</span>
                                <span class="text-xl font-bold text-primary" id="totalPrice">2 400 DH</span>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" id="submitBtn" class="w-full btn-primary text-white font-bold text-base py-4 rounded-xl shadow-lg flex items-center justify-center gap-2">
                            <span id="btnText">Ajouter à Ma Commande</span>
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                        </button>
                    </form>

                    <!-- Trust Badges -->
                    <div class="px-5 pb-5 space-y-2">
                        <div class="flex items-center gap-2 text-xs text-gray-600"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>Paiement sécurisé sur place</div>
                        <div class="flex items-center gap-2 text-xs text-gray-600"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>Annulation gratuite 24h avant</div>
                        <div class="flex items-center gap-2 text-xs text-gray-600"><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>Confirmation instantanée</div>
                    </div>
                </div>
            </aside>
        </div>

        <!-- ============================================== -->
        <!-- PEOPLE ALSO LIKE - ELITE OPTIMIZED SECTION -->
        <!-- ============================================== -->
        <section class="mt-12 md:mt-16 pt-8 md:pt-10 border-t border-gray-100">
            <div class="flex items-end justify-between mb-2">
                <div>
                    <h2 class="font-heading font-bold text-xl md:text-2xl text-gray-900">Ils Ont Aussi Adoré</h2>
                    <p class="text-sm text-gray-500 mt-1">Les voyageurs qui ont réservé l'Odyssée ont aussi craqué pour</p>
                </div>
                <a href="#" class="hidden md:flex items-center gap-1 text-primary text-sm font-semibold hover:underline whitespace-nowrap">
                    Voir tout
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                </a>
            </div>

            <!-- CAROUSEL (Mobile) / GRID (Desktop) -->
            <div class="pal-scroll" id="palCarousel">

                <!-- CARD: ODYSSEE NOMADE -->
                <article class="pal-card">
                    <div class="pal-card-image">
                        <img src="https://MTSZone.b-cdn.net/Agafay/Agafay7.jpg" alt="L'Odyssée Nomade" loading="lazy">
                        <div class="absolute top-3 left-3">
                            <span class="bg-gradient-to-r from-purple-600 to-pink-500 text-white text-[10px] font-bold px-2.5 py-1 rounded-full shadow-sm">Best-Seller</span>
                        </div>
                        <button class="absolute top-3 right-3 w-8 h-8 bg-white/90 backdrop-blur rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors" aria-label="Favoris">
                            <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/></svg>
                        </button>
                        <div class="absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-black/70 to-transparent"></div>
                        <div class="absolute bottom-3 left-3 flex items-center gap-1.5 text-white">
                            <svg class="w-4 h-4 text-yellow-400 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                            <span class="text-sm font-bold">4.8</span>
                            <span class="text-xs opacity-80">(582)</span>
                        </div>
                    </div>
                    <div class="pal-card-content">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-[10px] font-bold text-primary bg-primary/10 px-2 py-0.5 rounded-full">SOIRÉE</span>
                            <span class="text-[10px] text-gray-400">Agafay</span>
                        </div>
                        <h3 class="font-bold text-gray-900 mb-1 leading-tight">L'Odyssée Nomade</h3>
                        <p class="text-xs text-gray-500 mb-3 line-clamp-2">Quad, Dromadaire & Dîner Spectacle sous les étoiles</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-baseline gap-1.5">
                                <span class="text-xs text-gray-400 line-through">1200 DH</span>
                                <span class="font-bold text-lg text-gray-900">850 DH</span>
                            </div>
                            <button class="text-xs font-bold text-white bg-primary hover:bg-primary-dark px-4 py-2 rounded-full transition-colors">
                                Voir
                            </button>
                        </div>
                    </div>
                </article>

                <!-- CARD 1: JET SKI -->
                <article class="pal-card">
                    <div class="pal-card-image">
                        <img src="https://MTSZone.b-cdn.net/Agafay/Agafay3.jpg" alt="Jet Ski Lac Lalla Takerkoust" loading="lazy">
                        <!-- Badges -->
                        <div class="absolute top-3 left-3 flex flex-wrap gap-1.5">
                            <span class="bg-white/95 backdrop-blur text-[10px] font-bold px-2 py-1 rounded-full shadow-sm text-amber-700 flex items-center gap-1">
                                <svg class="w-3 h-3 text-yellow-500" fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                                Top Rated
                            </span>
                        </div>
                        <!-- Wishlist -->
                        <button class="absolute top-3 right-3 w-8 h-8 bg-white/90 backdrop-blur rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors" aria-label="Favoris">
                            <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/></svg>
                        </button>
                        <!-- Rating Overlay -->
                        <div class="absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-black/70 to-transparent"></div>
                        <div class="absolute bottom-3 left-3 flex items-center gap-1.5 text-white">
                            <svg class="w-4 h-4 text-yellow-400 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                            <span class="text-sm font-bold">4.9</span>
                            <span class="text-xs opacity-80">(238)</span>
                        </div>
                    </div>
                    <div class="pal-card-content">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-[10px] font-bold text-primary bg-primary/10 px-2 py-0.5 rounded-full">30 MIN</span>
                            <span class="text-[10px] text-gray-400">Lac Takerkoust</span>
                        </div>
                        <h3 class="font-bold text-gray-900 mb-1 leading-tight">Jet Ski sur le Lac</h3>
                        <p class="text-xs text-gray-500 mb-3 line-clamp-2">Sensations fortes sur les eaux cristallines face aux montagnes de l'Atlas</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-baseline gap-1.5">
                                <span class="text-xs text-gray-400 line-through">450 DH</span>
                                <span class="font-bold text-lg text-gray-900">350 DH</span>
                            </div>
                            <button class="text-xs font-bold text-white bg-primary hover:bg-primary-dark px-4 py-2 rounded-full transition-colors">
                                Voir
                            </button>
                        </div>
                    </div>
                </article>

                <!-- CARD 2: BUGGY -->
                <article class="pal-card">
                    <div class="pal-card-image">
                        <img src="https://MTSZone.b-cdn.net/Agafay/Agafay8.jpg" alt="Buggy VIP Experience" loading="lazy">
                        <div class="absolute top-3 left-3">
                            <span class="bg-gradient-to-r from-orange-500 to-amber-500 text-white text-[10px] font-bold px-2.5 py-1 rounded-full shadow-sm">Populaire</span>
                        </div>
                        <button class="absolute top-3 right-3 w-8 h-8 bg-white/90 backdrop-blur rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors" aria-label="Favoris">
                            <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/></svg>
                        </button>
                        <div class="absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-black/70 to-transparent"></div>
                        <div class="absolute bottom-3 left-3 flex items-center gap-1.5 text-white">
                            <svg class="w-4 h-4 text-yellow-400 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                            <span class="text-sm font-bold">4.7</span>
                            <span class="text-xs opacity-80">(189)</span>
                        </div>
                    </div>
                    <div class="pal-card-content">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-[10px] font-bold text-primary bg-primary/10 px-2 py-0.5 rounded-full">DEMI-JOURNÉE</span>
                            <span class="text-[10px] text-gray-400">Agafay</span>
                        </div>
                        <h3 class="font-bold text-gray-900 mb-1 leading-tight">Buggy VIP Experience</h3>
                        <p class="text-xs text-gray-500 mb-3 line-clamp-2">Conduisez un buggy dernière génération dans les pistes du désert</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-baseline gap-1.5">
                                <span class="text-xs text-gray-400 line-through">1100 DH</span>
                                <span class="font-bold text-lg text-gray-900">900 DH</span>
                            </div>
                            <button class="text-xs font-bold text-white bg-primary hover:bg-primary-dark px-4 py-2 rounded-full transition-colors">
                                Voir
                            </button>
                        </div>
                    </div>
                </article>
            </div>

            <!-- Mobile Scroll Indicators -->
            <div class="pal-dots md:hidden" id="palDots">
                <div class="pal-dot active"></div>
                <div class="pal-dot"></div>
                <div class="pal-dot"></div>
            </div>

            <!-- Mobile CTA -->
            <a href="#" class="md:hidden flex items-center justify-center gap-2 text-primary text-sm font-semibold mt-4 py-3 border border-primary/20 rounded-xl hover:bg-primary/5 transition-colors">
                Découvrir toutes les expériences
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
            </a>
        </section>

    </main>

    <!-- MOBILE STICKY BAR -->
    <div class="fixed bottom-0 left-0 right-0 md:hidden z-50 bg-white border-t border-gray-100 mobile-sticky-bar no-print" id="mobileStickyBar">
        <div class="px-4 py-3 flex items-center justify-between gap-4">
            <div>
                <div class="flex items-baseline gap-1.5">
                    <span class="text-xl font-bold text-gray-900">1200 DH</span>
                </div>
                <p class="text-[10px] text-gray-500">par personne</p>
            </div>
            <button id="mobile-book-btn" class="btn-primary flex-1 max-w-[200px] py-3.5 rounded-xl text-white font-bold text-sm uppercase tracking-wide flex items-center justify-center gap-2">
                <span>Réserver</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/></svg>
            </button>
        </div>
    </div>

    <!-- === ELITE MOBILE BOOKING SHEET === -->
    <div class="mobile-booking-overlay md:hidden" id="mobileBookingOverlay"></div>
    <div class="mobile-booking-sheet md:hidden" id="mobileBookingSheet">
        <div class="sheet-handle"></div>

        <div class="sheet-header">
            <div class="sheet-price-block">
                <span class="sheet-price-main">1200 DH</span>
                <div class="sheet-price-sub">
                    <span class="text-sm text-gray-500">/ personne</span>
                </div>
            </div>
            <button class="sheet-close-btn" id="closeBookingSheet">
                <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
            </button>
        </div>

        <!-- Urgency Banner -->
        <div class="mx-5 mt-4 bg-pink-50 border border-pink-100 rounded-xl p-3 flex items-center gap-3">
            <div class="w-2 h-2 bg-primary rounded-full pulse-dot"></div>
            <p class="text-sm text-primary-dark"><strong>3 places</strong> restantes pour demain</p>
        </div>

        <form class="sheet-form" id="mobileBookingForm">
            <!-- Date Selection -->
            <div class="sheet-form-group">
                <label class="sheet-form-label">Date de l'expérience</label>
                <input type="date" class="sheet-input" id="mobileDate" required>
            </div>

            <!-- Participants -->
            <div class="sheet-form-group">
                <label class="sheet-form-label">Nombre de participants</label>
                <select class="sheet-select" id="mobileParticipants">
                    <option value="1">1 Adulte</option>
                    <option value="2" selected>2 Adultes</option>
                    <option value="3">3 Adultes</option>
                    <option value="4">4 Adultes</option>
                    <option value="5">5 Adultes</option>
                    <option value="6">6+ Adultes (groupe)</option>
                </select>
            </div>

            <!-- Special Requests -->
            <div class="sheet-form-group">
                <label class="sheet-form-label">Demandes spéciales (optionnel)</label>
                <textarea class="sheet-textarea" id="mobileRequests" placeholder="Allergies, anniversaire, demande spéciale..."></textarea>
            </div>

            <!-- Price Summary -->
            <div class="sheet-summary">
                <div class="sheet-summary-row">
                    <span class="sheet-summary-label">1200 DH × <span id="mobileParticipantCount">2</span> adultes</span>
                    <span class="sheet-summary-value" id="mobileSubtotal">2 400 DH</span>
                </div>
                <div class="sheet-summary-row">
                    <span class="sheet-summary-label" style="font-weight: 700; color: #1a1a1a;">Total</span>
                    <span class="sheet-summary-value sheet-summary-total" id="mobileTotal">2 400 DH</span>
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="sheet-submit-btn" id="mobileSubmitBtn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                <span id="mobileSubmitText">Confirmer Ma Réservation</span>
            </button>

            <!-- Trust Badges -->
            <div class="sheet-trust-badges">
                <div class="sheet-trust-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                    <span>Paiement sécurisé</span>
                </div>
                <div class="sheet-trust-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <span>Confirmation instantanée</span>
                </div>
            </div>
        </form>
    </div>

    <!-- === ELITE STORY OVERLAY === -->
    <div id="storyOverlay" class="story-overlay">
        <div class="story-container">
            <div class="story-ui-top">
                <div class="story-progress-bar" id="storyProgressBar"></div>
                <div class="story-controls-row">
                    <div class="story-brand" id="storyBrandName">L'ODYSSÉE NOMADE</div>
                    <div class="story-actions">
                        <div class="story-icon" id="soundToggle">
                            <svg id="iconMute" class="hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" /><path stroke-linecap="round" stroke-linejoin="round" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2" /></svg>
                            <svg id="iconSound" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" /></svg>
                        </div>
                        <div class="story-icon" id="storyCloseBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                        </div>
                    </div>
                </div>
            </div>
            <div class="story-media-wrapper" id="storyMediaWrapper"></div>
            <div class="story-nav-zone nav-left" id="storyNavLeft"></div>
            <div class="story-nav-zone nav-center" id="storyNavHold"></div>
            <div class="story-nav-zone nav-right" id="storyNavRight"></div>
            <div class="story-footer" id="storyTextContent">
                <div class="story-footer-header">
                    <div class="story-footer-title" id="storyFooterTitle">L'Odyssée Nomade</div>
                    <div class="story-footer-rating" id="storyFooterRating"></div>
                </div>
                <div class="story-footer-description" id="storyFooterDescription">Quad, Dromadaire & Dîner Spectacle sous les étoiles.</div>
                <button class="story-cta-btn" id="storyBookBtn">RÉSERVER CETTE EXPÉRIENCE (0€)</button>
                <div class="story-trust">
                    <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="M9 12l2 2 4-4"></path></svg>
                    Paiement sur place &bull; Zéro Frais
                </div>
            </div>
            <!-- CLIMAX CARD -->
            <div class="story-climax-card" id="climaxCard">
                <div class="climax-phantom-layer" id="climaxBgContainer"></div>
                <div class="climax-gradient-overlay"></div>
                <div class="climax-content">
                    <h2 class="climax-title" id="climaxTitle">L'Odyssée Nomade</h2>
                    <div class="climax-badge">
                        <div class="climax-stars">
                            <svg viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                            <svg viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                            <svg viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                            <svg viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                            <svg viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                        </div>
                        <span class="climax-badge-text">Excellence Confirmée</span>
                    </div>
                    <p class="climax-desc" id="climaxDesc">Une expérience inoubliable vous attend dans le désert d'Agafay.</p>
                    <button class="climax-cta" id="climaxBtn">RÉSERVER CETTE EXPÉRIENCE</button>
                    <div class="story-trust">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#2ecc71" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        Réservation Gratuite & Instantanée
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- === ELITE SUCCESS MODAL === -->
    <div id="successModal" class="success-modal-overlay">
        <div class="success-modal">
            <div class="success-icon-container">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                </svg>
            </div>

            <h2 class="success-title">Expérience Ajoutée !</h2>

            <p class="success-subtitle">
                <strong>L'Odyssée Nomade</strong> a été ajoutée à votre commande avec succès.
            </p>

            <div class="success-experience-badge">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span id="modalParticipants">2 Adultes</span> • <span id="modalDate">Demain</span>
            </div>

            <div class="whatsapp-notice">
                <div class="whatsapp-icon">
                    <svg viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.867-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.52.149-.173.198-.297.297-.495.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413z"/></svg>
                </div>
                <div class="whatsapp-text">
                    <strong>Votre concierge vous contacte</strong>
                    <span>Vous recevrez un message WhatsApp dans les prochaines minutes avec tous les détails de votre expérience.</span>
                </div>
            </div>

            <button id="closeSuccessModal" class="success-close-btn">
                Parfait, Merci !
            </button>
        </div>
    </div>
    
    <!-- FINAL OPTIMIZED REVIEW LIGHTBOX (Relocated to root for correct centering) -->
    <div id="reviewLightbox">
        <div class="lightbox-counter" id="lightboxCounter"></div>
        <div class="lightbox-loader"></div>
    
        <button class="lightbox-close-btn" onclick="closeReviewLightbox()">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
    
        <div id="lightboxImageContainer">
            <img id="lightboxImage" src="" alt="Gallery Image" draggable="false">
        </div>
    
        <button class="lightbox-nav-btn lightbox-prev" onclick="navigateLightbox(event, -1)">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        </button>
    
        <button class="lightbox-nav-btn lightbox-next" onclick="navigateLightbox(event, 1)">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
        </button>
    </div>

    <!-- JAVASCRIPT -->
    <script>
        // === EXPERIENCE DATA ===
        window.experiencesData = [{
            id: "hotairballoon",
            name: "L'Éveil Céleste : Vol Royal",
            shortName: "L'Éveil Céleste",
            rating: "5.0",
            description: "Vol en montgolfière au lever du soleil et petit-déjeuner berbère.",
            gallery: [
                "https://MTSZone.b-cdn.net/Agafay/Vertical/15.jpg",
                "https://MTSZone.b-cdn.net/Agafay/Vertical/14.jpg",
                "https://MTSZone.b-cdn.net/Agafay/Vertical/17.jpg",
                "https://MTSZone.b-cdn.net/Agafay/Vertical/Untitled-LiveDoc-(1).jpg"
            ],
            galleryMobile: [
                "https://MTSZone.b-cdn.net/Agafay/Vertical/15.jpg",
                "https://MTSZone.b-cdn.net/Agafay/Vertical/14.jpg",
                "https://MTSZone.b-cdn.net/Agafay/Vertical/17.jpg",
                "https://MTSZone.b-cdn.net/Agafay/Vertical/Untitled-LiveDoc-(1).jpg"
            ],
            finalImage: "https://MTSZone.b-cdn.net/Agafay/Vertical/18.jpg",
            finalImageMobile: "https://MTSZone.b-cdn.net/Agafay/Vertical/18.jpg",
            video: "https://player.mediadelivery.net/embed/555558/625b43cd-fa48-4fdc-a73c-ffe6ca12952d",
            audio: "https://MTSZone.b-cdn.net/HotAirAudio1.MP3"
        }];

        // === ELITE STORY MANAGER ===
        window.StoryManager = {
            queue: [],
            currentIndex: 0,
            currentExp: null,
            timer: null,
            isPaused: false,
            isMuted: false,
            audioObj: new Audio(),
            currentVideoPlayer: null,
            imageDuration: 4000,
            hasUnlockedAudio: false,

            init: function() {
                this.audioObj.loop = false;
                this.audioObj.volume = 1.0;
                this.audioObj.preload = 'auto';

                // Preload audio
                const agafayAudio = new Audio('https://MTSZone.b-cdn.net/agafyAudio1.MP3');
                agafayAudio.preload = 'auto';

                // Nav Controls
                document.getElementById('storyNavLeft').addEventListener('click', (e) => { e.stopPropagation(); this.prev(); });
                document.getElementById('storyNavRight').addEventListener('click', (e) => { e.stopPropagation(); this.next(); });

                // Center control
                const holdZone = document.getElementById('storyNavHold');
                let touchStartTime = 0;
                let wasPausedBeforeTouch = false;

                const handleStart = (e) => {
                    if(e.cancelable && e.target.id === 'storyNavHold') e.preventDefault();
                    touchStartTime = Date.now();
                    wasPausedBeforeTouch = this.isPaused;
                    this.pause();
                };

                const handleEnd = (e) => {
                    if(e.cancelable && e.target.id === 'storyNavHold') e.preventDefault();
                    const duration = Date.now() - touchStartTime;
                    const isTap = duration < 250;
                    if (isTap) {
                        if (wasPausedBeforeTouch) this.resume();
                    } else {
                        this.resume();
                    }
                };

                holdZone.addEventListener('mousedown', handleStart);
                holdZone.addEventListener('mouseup', handleEnd);
                holdZone.addEventListener('touchstart', handleStart, {passive: false});
                holdZone.addEventListener('touchend', handleEnd, {passive: false});

                document.getElementById('soundToggle').addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.toggleMute();
                });

                document.getElementById('storyCloseBtn').addEventListener('click', () => this.close());

                const bookAction = () => {
                    this.close();
                    document.getElementById('eliteBookingForm').scrollIntoView({ behavior: 'smooth', block: 'center' });
                };
                document.getElementById('storyBookBtn').addEventListener('click', bookAction);
                document.getElementById('climaxBtn').addEventListener('click', bookAction);

                // Audio Unlocker
                const unlockAudio = () => {
                    if (this.hasUnlockedAudio) return;
                    const p = this.audioObj.play();
                    if (p !== undefined) {
                        p.then(() => {
                            this.audioObj.pause();
                            this.audioObj.currentTime = 0;
                            this.hasUnlockedAudio = true;
                            ['click', 'touchstart', 'scroll'].forEach(evt => document.removeEventListener(evt, unlockAudio));
                        }).catch(() => {});
                    }
                };
                ['click', 'touchstart', 'scroll'].forEach(evt => document.addEventListener(evt, unlockAudio, { passive: true, once: true }));
            },

            open: function(id) {
                this.currentExp = (window.experiencesData || []).find(e => e.id === id);
                if(!this.currentExp) return;

                if(!this.hasUnlockedAudio) {
                    this.audioObj.play().catch(()=>{});
                    this.audioObj.pause();
                    this.hasUnlockedAudio = true;
                }

                // Check for Mobile
                const isMobile = window.innerWidth < 768;
                
                // Select Gallery based on device
                const sourceGallery = (isMobile && this.currentExp.galleryMobile) ? this.currentExp.galleryMobile : this.currentExp.gallery;
                const sourceFinal = (isMobile && this.currentExp.finalImageMobile) ? this.currentExp.finalImageMobile : this.currentExp.finalImage;

                this.updateUI(this.currentExp, sourceFinal);

                if(this.currentExp.audio) {
                    this.audioObj.src = this.currentExp.audio;
                    this.audioObj.onloadedmetadata = () => {
                        const total = this.audioObj.duration;
                        if(total > 10) {
                            const count = sourceGallery.length;
                            const reservedForClimax = Math.max(5, total * 0.15);
                            const availableTime = total - reservedForClimax - 15;
                            if(availableTime > 0 && count > 0) {
                                this.imageDuration = (availableTime / count) * 1000;
                                this.imageDuration = Math.max(2500, Math.min(6000, this.imageDuration));
                            }
                        }
                    };
                }

                this.queue = [];
                if(this.currentExp.video) this.queue.push({ type: 'video', src: this.currentExp.video });
                sourceGallery.forEach(img => this.queue.push({ type: 'image', src: img }));

                // Preload images
                sourceGallery.forEach((src, index) => {
                    const img = new Image();
                    if (index < 3) img.fetchPriority = 'high';
                    img.src = src;
                });

                if (sourceFinal) {
                    const finalImg = new Image();
                    finalImg.src = sourceFinal;
                }

                // Progress Bar
                const progContainer = document.getElementById('storyProgressBar');
                progContainer.innerHTML = '';
                this.queue.forEach(() => {
                    const seg = document.createElement('div');
                    seg.className = 'progress-segment';
                    seg.innerHTML = '<div class="progress-fill"></div>';
                    progContainer.appendChild(seg);
                });

                this.currentIndex = 0;
                this.isPaused = false;

                document.getElementById('storyOverlay').classList.add('show');
                document.body.style.overflow = 'hidden';

                this.renderSlide();
            },

            renderSlide: function() {
                const wrapper = document.getElementById('storyMediaWrapper');

                if(this.timer) clearTimeout(this.timer);
                this.timer = null;

                const allFills = document.querySelectorAll('.progress-segment .progress-fill');
                allFills.forEach((fill, i) => {
                    fill.style.transition = 'none';
                    fill.style.transform = i < this.currentIndex ? 'scaleX(1)' : 'scaleX(0)';
                });

                if(this.currentIndex >= this.queue.length) {
                    this.showClimax();
                    return;
                }

                // Preload next 3
                for (let i = 1; i <= 3; i++) {
                    const nextIdx = this.currentIndex + i;
                    if (nextIdx < this.queue.length) {
                        const next = this.queue[nextIdx];
                        if (next.type === 'image') {
                            const img = new Image();
                            img.src = next.src;
                        }
                    }
                }

                document.getElementById('climaxCard').classList.remove('active');
                document.getElementById('storyTextContent').classList.remove('hidden');

                const item = this.queue[this.currentIndex];
                const currentFill = allFills[this.currentIndex];

                const existingItems = wrapper.querySelectorAll('.story-media-item');
                existingItems.forEach(el => {
                    el.style.opacity = '0';
                    setTimeout(() => el.remove(), 300);
                });

                wrapper.querySelectorAll('.video-preloader').forEach(p => p.remove());

                if(item.type === 'video') {
                    this.playVideoSlide(item, wrapper, currentFill);
                } else {
                    this.playImageSlide(item, wrapper, currentFill);
                }
            },

            playVideoSlide: function(item, container, progressBar) {
                if(this.isMuted) {
                    this.audioObj.pause();
                } else {
                    this.fadeAudio(0, 300, true);
                }

                const preloader = document.createElement('div');
                preloader.className = 'video-preloader';
                preloader.innerHTML = '<div class="preloader-pulse"></div>';
                container.appendChild(preloader);

                const iframe = document.createElement('iframe');
                const ts = new Date().getTime();

                let src = item.src;
                if(!src.includes('?')) src += '?';
                src += `&autoplay=true&loop=false&muted=false&preload=true`;
                src += `&controls=false&playButton=false&bigPlayButton=false`;
                src += `&pip=false&captions=false&playsinline=true`;
                src += `&responsive=true&transparentBackground=false`;
                src += `&ts=${ts}`;

                iframe.src = src;
                iframe.className = 'story-media-item';
                iframe.allow = "autoplay; fullscreen; accelerometer; encrypted-media; gyroscope; picture-in-picture";
                iframe.setAttribute('loading', 'eager');
                iframe.setAttribute('playsinline', '');
                iframe.setAttribute('webkit-playsinline', '');
                iframe.style.pointerEvents = 'none';
                iframe.style.opacity = '0';
                iframe.style.transition = 'opacity 0.5s ease';

                container.appendChild(iframe);

                setTimeout(() => {
                    iframe.style.opacity = '1';
                    preloader.classList.add('fade-out');
                    setTimeout(() => preloader.remove(), 600);
                }, 800);

                requestAnimationFrame(() => iframe.classList.add('active'));

                if(typeof playerjs !== 'undefined') {
                    const player = new playerjs.Player(iframe);
                    this.currentVideoPlayer = player;

                    player.on('ready', () => {
                        player.play();
                        if(!this.isMuted) {
                            player.unmute();
                            player.setVolume(100);
                        }
                        player.getDuration((d) => {
                            const dur = d ? d : 15;
                            progressBar.style.transition = `transform ${dur}s linear`;
                            progressBar.style.transform = 'scaleX(1)';
                        });
                        preloader.classList.add('fade-out');
                        iframe.style.opacity = '1';
                    });

                    player.on('ended', () => {
                        this.next();
                    });
                } else {
                    progressBar.style.transition = 'transform 15s linear';
                    progressBar.style.transform = 'scaleX(1)';
                    this.timer = setTimeout(() => this.next(), 15000);
                }
            },

            playImageSlide: function(item, container, progressBar) {
                this.currentVideoPlayer = null;

                if(!this.isMuted && this.audioObj.paused) {
                    this.audioObj.play().catch(()=>{});
                    this.fadeAudio(1, 400);
                }

                const img = document.createElement('img');
                img.src = item.src;
                img.className = 'story-media-item';
                img.style.opacity = '0';
                img.style.transform = 'scale(1.02)';
                img.style.transition = 'opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1), transform 0.5s cubic-bezier(0.16, 1, 0.3, 1)';

                container.appendChild(img);

                requestAnimationFrame(() => {
                    requestAnimationFrame(() => {
                        img.classList.add('active');
                        img.style.opacity = '1';
                        img.style.transform = 'scale(1)';
                    });
                });

                setTimeout(() => {
                    progressBar.style.transition = `transform ${this.imageDuration}ms linear`;
                    progressBar.style.transform = 'scaleX(1)';
                }, 50);

                this.timer = setTimeout(() => this.next(), this.imageDuration);
            },

            fadeAudio: function(targetVol, duration, pauseAtEnd = false) {
                const startVol = this.audioObj.volume;
                const steps = 10;
                const interval = duration / steps;
                const stepAmount = (targetVol - startVol) / steps;

                let counter = 0;
                const fadeTimer = setInterval(() => {
                    counter++;
                    let newVol = this.audioObj.volume + stepAmount;
                    if(newVol < 0) newVol = 0;
                    if(newVol > 1) newVol = 1;
                    this.audioObj.volume = newVol;

                    if(counter >= steps) {
                        clearInterval(fadeTimer);
                        this.audioObj.volume = targetVol;
                        if(pauseAtEnd) this.audioObj.pause();
                    }
                }, interval);
            },

            toggleMute: function() {
                this.isMuted = !this.isMuted;

                document.getElementById('iconMute').classList.toggle('hidden', !this.isMuted);
                document.getElementById('iconSound').classList.toggle('hidden', this.isMuted);

                if(this.isMuted) {
                    this.fadeAudio(0, 200, true);
                    if(this.currentVideoPlayer) this.currentVideoPlayer.mute();
                } else {
                    if(this.currentVideoPlayer) {
                        this.currentVideoPlayer.unmute();
                        this.currentVideoPlayer.setVolume(100);
                    } else {
                        this.audioObj.play().catch(()=>{});
                        this.fadeAudio(1, 200);
                    }
                }
            },

            pause: function() {
                this.isPaused = true;
                const segments = document.querySelectorAll('.progress-segment');
                if(segments[this.currentIndex]) {
                    const fill = segments[this.currentIndex].querySelector('.progress-fill');
                    if(fill) {
                        const computed = window.getComputedStyle(fill);
                        const matrix = computed.transform;
                        fill.style.transition = 'none';
                        fill.style.transform = matrix;
                    }
                }
                clearTimeout(this.timer);
                if(this.currentVideoPlayer) this.currentVideoPlayer.pause();
                if(!this.audioObj.paused) this.audioObj.pause();
            },

            resume: function() {
                if(!this.isPaused) return;
                this.isPaused = false;

                const item = this.queue[this.currentIndex];
                const segments = document.querySelectorAll('.progress-segment');
                const fill = segments[this.currentIndex] ? segments[this.currentIndex].querySelector('.progress-fill') : null;

                if(item.type === 'video') {
                    if(this.currentVideoPlayer) {
                        this.currentVideoPlayer.play();
                        if(fill) {
                            fill.style.transition = 'transform 10s linear';
                            fill.style.transform = 'scaleX(1)';
                        }
                    }
                } else {
                    if(!this.isMuted) {
                        this.audioObj.play().catch(()=>{});
                        this.fadeAudio(1, 200);
                    }
                    if(fill) {
                        fill.style.transition = `transform ${this.imageDuration}ms linear`;
                        fill.style.transform = 'scaleX(1)';
                    }
                    this.timer = setTimeout(() => this.next(), this.imageDuration);
                }
            },

            next: function() {
                if(this.currentIndex < this.queue.length) {
                    this.currentIndex++;
                    this.renderSlide();
                }
            },

            prev: function() {
                if(this.currentIndex > 0) {
                    this.currentIndex--;
                    this.renderSlide();
                }
            },

            showClimax: function() {
                if(!this.isMuted) {
                    this.audioObj.play().catch(()=>{});
                    this.fadeAudio(1, 300);
                }
                document.getElementById('storyTextContent').classList.add('hidden');
                document.getElementById('storyMediaWrapper').innerHTML = '';
                document.getElementById('climaxCard').classList.add('active');
            },

            updateUI: function(exp, finalImageSource) {
                const shortName = exp.shortName || exp.name.split(':')[0].trim();

                document.getElementById('storyBrandName').textContent = exp.name;
                
                const footerTitle = document.getElementById('storyFooterTitle');
                if(footerTitle) footerTitle.textContent = shortName;
                
                const footerRating = document.getElementById('storyFooterRating');
                if(footerRating) { 
                    footerRating.innerHTML = '<span style="color: #FFD700; letter-spacing: 2px;">★★★★★</span> <span style="color: #FFF; font-weight: 700; margin-left: 6px;">' + (exp.rating || '4.8') + '/5</span>'; 
                }
                
                const footerDesc = document.getElementById('storyFooterDescription');
                if(footerDesc) { footerDesc.textContent = exp.description; }

                document.getElementById('climaxTitle').textContent = shortName;
                document.getElementById('climaxDesc').textContent = exp.description;

                const bgContainer = document.getElementById('climaxBgContainer');
                if(finalImageSource) {
                    bgContainer.style.backgroundImage = `url('${finalImageSource}')`;
                }
            },

            close: function() {
                this.fadeAudio(0, 200, true);
                document.getElementById('storyOverlay').classList.remove('show');

                setTimeout(() => {
                    document.getElementById('storyMediaWrapper').innerHTML = '';
                    document.body.style.overflow = '';
                    this.audioObj.pause();
                    this.audioObj.currentTime = 0;
                    this.currentVideoPlayer = null;
                    clearTimeout(this.timer);
                    this.currentIndex = 0;
                    this.queue = [];
                    document.getElementById('climaxCard').classList.remove('active');
                }, 300);
            }
        };

        // === UTILS ===
        function getUserID() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('userID') || 'unknown_user';
        }

        // === ELITE BOOKING FORM HANDLER ===
        const BookingManager = {
            pricePerPerson: 1200,
            originalPrice: 1200,

            init: function() {
                const form = document.getElementById('eliteBookingForm');
                const participantsSelect = document.getElementById('participants');
                const dateInput = document.getElementById('bookingDate');

                // Set default date to tomorrow
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                dateInput.value = tomorrow.toISOString().split('T')[0];
                dateInput.min = tomorrow.toISOString().split('T')[0];

                // Update price on participants change
                participantsSelect.addEventListener('change', () => this.updatePricing());

                // Form submission
                form.addEventListener('submit', (e) => this.handleSubmit(e));

                // Mobile button - now opens the booking sheet
                const mobileBtn = document.getElementById('mobile-book-btn');
                if (mobileBtn) {
                    mobileBtn.addEventListener('click', () => MobileBookingSheet.open());
                }

                // Close modal
                document.getElementById('closeSuccessModal').addEventListener('click', () => this.closeModal());

                // Close on overlay click
                document.getElementById('successModal').addEventListener('click', (e) => {
                    if (e.target.id === 'successModal') this.closeModal();
                });

                this.updatePricing();
            },

            updatePricing: function() {
                const participants = parseInt(document.getElementById('participants').value) || 2;
                const subtotal = this.pricePerPerson * participants;
                
                document.getElementById('participantCount').textContent = participants;
                document.getElementById('subtotalPrice').textContent = subtotal.toLocaleString('fr-FR') + ' DH';
                document.getElementById('totalPrice').textContent = subtotal.toLocaleString('fr-FR') + ' DH';
            },

            handleSubmit: async function(e) {
                e.preventDefault();

                const btn = document.getElementById('submitBtn');
                const btnText = document.getElementById('btnText');
                const participants = document.getElementById('participants').value;
                const date = document.getElementById('bookingDate').value;
                
                // Show loading state
                btn.disabled = true;
                btnText.innerHTML = '<span class="btn-spinner"></span>Traitement en cours...';

                // Prepare Payload
                const payload = {
                    userID: getUserID(),
                    Date: date,
                    "Number of people": participants,
                    offerID: "HotAirBalloon"
                };

                try {
                    // Send to Webhook
                    await fetch('https://hook.eu1.make.com/opztxf4d2o3f34uay2g2z1u2ccr8ndgi', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    // Show success modal
                    this.showSuccessModal(participants, date);

                } catch (error) {
                    console.error('Webhook error:', error);
                    // Still show success to user to avoid friction, potentially log error elsewhere
                    this.showSuccessModal(participants, date);
                } finally {
                    // Reset button
                    btn.disabled = false;
                    btnText.innerHTML = 'Ajouter à Ma Commande';
                }
            },

            showSuccessModal: function(participants, date) {
                // Update modal content
                const participantText = participants == 1 ? '1 Adulte' : `${participants} Adultes`;
                document.getElementById('modalParticipants').textContent = participantText;

                // Format date
                let dateText = 'Demain';
                if (date) {
                    const dateObj = new Date(date);
                    const options = { weekday: 'short', day: 'numeric', month: 'short' };
                    dateText = dateObj.toLocaleDateString('fr-FR', options);
                }
                document.getElementById('modalDate').textContent = dateText;

                // Show modal
                const modal = document.getElementById('successModal');
                modal.classList.add('show');
                document.body.style.overflow = 'hidden';
            },

            closeModal: function() {
                const modal = document.getElementById('successModal');
                modal.classList.remove('show');
                document.body.style.overflow = '';
            }
        };

        // === ELITE MOBILE BOOKING SHEET MANAGER ===
        const MobileBookingSheet = {
            pricePerPerson: 1200,
            originalPrice: 1200,
            isOpen: false,
            startY: 0,
            currentY: 0,

            init: function() {
                const sheet = document.getElementById('mobileBookingSheet');
                const overlay = document.getElementById('mobileBookingOverlay');
                const closeBtn = document.getElementById('closeBookingSheet');
                const form = document.getElementById('mobileBookingForm');
                const participantsSelect = document.getElementById('mobileParticipants');
                const dateInput = document.getElementById('mobileDate');
                const stickyBar = document.getElementById('mobileStickyBar');

                if (!sheet) return;

                // Set default date to tomorrow
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                dateInput.value = tomorrow.toISOString().split('T')[0];
                dateInput.min = tomorrow.toISOString().split('T')[0];

                // Open event (Entire Sticky Bar)
                if (stickyBar) {
                    stickyBar.addEventListener('click', (e) => {
                        // Prevent double firing if clicking button inside
                        if (!e.target.closest('#mobile-book-btn')) {
                            this.open();
                        }
                    });
                }

                // Close events
                closeBtn.addEventListener('click', () => this.close());
                overlay.addEventListener('click', () => this.close());

                // Participant change updates price
                participantsSelect.addEventListener('change', () => this.updatePricing());

                // Form submission
                form.addEventListener('submit', (e) => this.handleSubmit(e));

                // Swipe to close
                sheet.addEventListener('touchstart', (e) => this.handleTouchStart(e), { passive: true });
                sheet.addEventListener('touchmove', (e) => this.handleTouchMove(e), { passive: false });
                sheet.addEventListener('touchend', (e) => this.handleTouchEnd(e), { passive: true });

                // Initial pricing
                this.updatePricing();
            },

            open: function() {
                const sheet = document.getElementById('mobileBookingSheet');
                const overlay = document.getElementById('mobileBookingOverlay');

                overlay.classList.add('active');
                sheet.classList.add('active');
                document.body.style.overflow = 'hidden';
                this.isOpen = true;

                // Hide the sticky bar when sheet is open
                const stickyBar = document.getElementById('mobileStickyBar');
                if (stickyBar) stickyBar.style.display = 'none';
            },

            close: function() {
                const sheet = document.getElementById('mobileBookingSheet');
                const overlay = document.getElementById('mobileBookingOverlay');

                sheet.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
                this.isOpen = false;

                // Show the sticky bar when sheet is closed
                const stickyBar = document.getElementById('mobileStickyBar');
                if (stickyBar) stickyBar.style.display = '';

                // Reset sheet position
                sheet.style.transform = '';
            },

            handleTouchStart: function(e) {
                this.startY = e.touches[0].clientY;
                this.currentY = this.startY;
            },

            handleTouchMove: function(e) {
                if (!this.isOpen) return;
                this.currentY = e.touches[0].clientY;
                const deltaY = this.currentY - this.startY;
                const sheet = document.getElementById('mobileBookingSheet');

                // Only allow dragging down IF at the top of scroll
                if (deltaY > 0 && sheet.scrollTop <= 0) {
                    sheet.style.transform = `translateY(${deltaY}px)`;
                    e.preventDefault(); // Prevent page refresh but allow sheet drag
                }
            },

            handleTouchEnd: function(e) {
                const deltaY = this.currentY - this.startY;
                const sheet = document.getElementById('mobileBookingSheet');

                // If dragged more than 100px down, close
                if (deltaY > 100) {
                    this.close();
                } else {
                    // Reset position with animation
                    sheet.style.transition = 'transform 0.3s ease';
                    sheet.style.transform = '';
                    setTimeout(() => {
                        sheet.style.transition = '';
                    }, 300);
                }
            },

            updatePricing: function() {
                const participants = parseInt(document.getElementById('mobileParticipants').value) || 2;
                const subtotal = this.pricePerPerson * participants;

                // Dynamic text update for "X adultes"
                const plural = participants > 1 ? 's' : '';
                document.getElementById('mobileParticipantCount').textContent = participants; 
                
                // Update Sticky Bar Pricing Text if visible to reinforce context
                const stickyPrice = document.querySelector('#mobileStickyBar .text-xl');
                const stickySub = document.querySelector('#mobileStickyBar .text-\\[10px\\]');
                if(stickyPrice && stickySub) {
                    if(participants > 1) {
                        stickyPrice.textContent = subtotal.toLocaleString('fr-FR') + ' DH';
                        stickySub.textContent = `Total pour ${participants} personnes`;
                    } else {
                        stickyPrice.textContent = '1200 DH';
                        stickySub.textContent = 'par personne';
                    }
                }

                document.getElementById('mobileSubtotal').textContent = subtotal.toLocaleString('fr-FR') + ' DH';
                document.getElementById('mobileTotal').textContent = subtotal.toLocaleString('fr-FR') + ' DH';
            },

            handleSubmit: async function(e) {
                e.preventDefault();

                const btn = document.getElementById('mobileSubmitBtn');
                const btnText = document.getElementById('mobileSubmitText');
                const participants = document.getElementById('mobileParticipants').value;
                const date = document.getElementById('mobileDate').value;

                // Show loading state
                btn.disabled = true;
                btnText.innerHTML = '<span class="btn-spinner"></span>Traitement...';

                // Prepare Payload
                const payload = {
                    userID: getUserID(),
                    Date: date,
                    "Number of people": participants,
                    offerID: "HotAirBalloon"
                };

                try {
                    // Send to Webhook
                    await fetch('https://hook.eu1.make.com/opztxf4d2o3f34uay2g2z1u2ccr8ndgi', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    // Close the sheet
                    this.close();

                    // Show success modal
                    BookingManager.showSuccessModal(participants, date);

                } catch (error) {
                    console.error('Webhook error:', error);
                    this.close();
                    BookingManager.showSuccessModal(participants, date);
                } finally {
                    btn.disabled = false;
                    btnText.innerHTML = 'Confirmer Ma Réservation';
                }
            }
        };

        // === DOM READY & INITIALIZATION ===
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize managers
            StoryManager.init();
            MobileBookingSheet.init();
            BookingManager.init();

            // Fade Up Animation
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animationPlayState = 'running';
                        observer.unobserve(entry.target);
                    }
                });
            });
            document.querySelectorAll('.fade-up').forEach(el => {
                el.style.animationPlayState = 'paused';
                observer.observe(el);
            });

            // Mobile Gallery Dots
            const mobileGallery = document.getElementById('mobileGallery');
            const galleryDots = document.getElementById('galleryDots');
            if(mobileGallery && galleryDots) {
                const dots = galleryDots.querySelectorAll('div');
                mobileGallery.addEventListener('scroll', () => {
                    const scrollPos = mobileGallery.scrollLeft;
                    const itemWidth = mobileGallery.querySelector('.mobile-snap-item').offsetWidth + 12;
                    const activeIndex = Math.round(scrollPos / itemWidth);
                    dots.forEach((dot, i) => {
                        if(i === activeIndex) {
                            dot.classList.add('bg-primary');
                            dot.classList.remove('bg-gray-300');
                            dot.style.width = '24px';
                        } else {
                            dot.classList.remove('bg-primary');
                            dot.classList.add('bg-gray-300');
                            dot.style.width = '6px';
                        }
                    });
                });
            }

            // People Also Like Dots
            const palCarousel = document.getElementById('palCarousel');
            const palDots = document.getElementById('palDots');
            if(palCarousel && palDots && window.innerWidth < 768) {
                const dots = palDots.querySelectorAll('.pal-dot');
                palCarousel.addEventListener('scroll', () => {
                    const scrollPos = palCarousel.scrollLeft;
                    const itemWidth = 280 + 16;
                    const activeIndex = Math.round(scrollPos / itemWidth);
                    dots.forEach((dot, i) => { dot.classList.toggle('active', i === activeIndex); });
                });
            }

            // --- UPGRADED "LOAD MORE REVIEWS" LOGIC ---
            const loadMoreBtn = document.getElementById('loadMoreReviews');
            const hiddenReviews = document.getElementById('hiddenReviews');
            let reviewsExpanded = false;

            if (loadMoreBtn && hiddenReviews) {
                // Initial calculation of height
                hiddenReviews.style.maxHeight = '0px';

                loadMoreBtn.addEventListener('click', function() {
                    const btnIcon = this.querySelector('svg');
                    const btnText = this.querySelector('span:first-of-type');
                    const btnLabel = document.getElementById('reviewCountLabel');

                    if (!reviewsExpanded) {
                        // Expand
                        hiddenReviews.classList.remove('hidden');
                        hiddenReviews.classList.add('showing');
                        const fullHeight = hiddenReviews.scrollHeight + 'px';
                        hiddenReviews.style.maxHeight = fullHeight;
                        
                        btnIcon.classList.add('rotate-180');
                        btnText.textContent = "Voir moins";
                        btnLabel.textContent = "(9 sur 327 affichés)";
                        reviewsExpanded = true;
                        
                        window.addEventListener('resize', adjustReviewHeight);
                        
                    } else {
                        // Collapse
                        hiddenReviews.style.maxHeight = '0px';
                        hiddenReviews.classList.remove('showing');
                        
                        setTimeout(() => {
                            if (!reviewsExpanded) hiddenReviews.classList.add('hidden');
                        }, 500);

                        btnIcon.classList.remove('rotate-180');
                        btnText.textContent = "Voir plus d'avis";
                        btnLabel.textContent = "(6 sur 327 affichés)";
                        reviewsExpanded = false;
                        
                        document.getElementById('reviews').scrollIntoView({ behavior: 'smooth', block: 'start' });
                        window.removeEventListener('resize', adjustReviewHeight);
                    }
                });
                
                function adjustReviewHeight() {
                    if (reviewsExpanded) {
                        hiddenReviews.style.maxHeight = 'none';
                        const newHeight = hiddenReviews.scrollHeight + 'px';
                        hiddenReviews.style.maxHeight = newHeight;
                    }
                }
            }
        });

        // Review Translation Logic
        function toggleTranslation(btn) {
            const container = btn.closest('.review-content-wrapper');
            const translated = container.querySelector('.review-translated');
            const original = container.querySelector('.review-original');
            
            if (original.classList.contains('visible')) {
                // Switch back to translated
                original.classList.remove('visible');
                translated.classList.remove('hidden');
                btn.innerHTML = '<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/></svg> Voir l\'original (Anglais)';
            } else {
                // Switch to original
                translated.classList.add('hidden');
                original.classList.add('visible');
                btn.innerHTML = '<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/></svg> Voir la traduction (Français)';
            }
        }

/* === REBUILT OPTIMIZED GALLERY LOGIC === */
let currentLightboxImages = [];
let currentLightboxIndex = 0;
let touchStartX = 0;
let touchEndX = 0;

function openReviewLightbox(element, index) {
    // 1. Robustly find the gallery container
    let gallery = element.closest('.elite-review-gallery') ||
                  element.closest('.featured-review-gallery') ||
                  element.closest('.review-images-gallery');
    
    if (!gallery) return;

    // 2. Grab images (filtered for valid sources)
    const images = Array.from(gallery.querySelectorAll('img'))
        .filter(img => img.src && !img.src.includes('data:image'));
        
    currentLightboxImages = images.map(img => img.src);
    
    if (currentLightboxImages.length === 0) return;

    // 3. Set Index
    currentLightboxIndex = index;
    if (currentLightboxIndex < 0) currentLightboxIndex = 0;
    
    // 4. Show Lightbox
    const lightbox = document.getElementById('reviewLightbox');
    lightbox.classList.remove('hidden');
    
    // Force reflow for transition
    void lightbox.offsetWidth;
    
    lightbox.classList.add('active');
    document.body.style.overflow = 'hidden'; // Stop background scrolling

    // 5. Load Initial Image
    updateLightboxImage();
    
    // 6. Close on background click
    lightbox.onclick = function(e) {
        if(e.target === lightbox || e.target.id === 'lightboxImageContainer') closeReviewLightbox();
    }
    
    // 7. Add Swipe Listeners
    const imgContainer = document.getElementById('lightboxImageContainer');
    imgContainer.addEventListener('touchstart', handleTouchStart, {passive: true});
    imgContainer.addEventListener('touchend', handleTouchEnd, {passive: true});
}

function closeReviewLightbox() {
    const lightbox = document.getElementById('reviewLightbox');
    lightbox.classList.remove('active');
    
    setTimeout(() => {
        lightbox.classList.add('hidden');
        document.getElementById('lightboxImage').src = '';
        document.body.style.overflow = '';
    }, 300);
}

function updateLightboxImage() {
    const img = document.getElementById('lightboxImage');
    const counter = document.getElementById('lightboxCounter');
    const loader = document.querySelector('.lightbox-loader');
    const src = currentLightboxImages[currentLightboxIndex];

    // Update Counter
    counter.textContent = `${currentLightboxIndex + 1} / ${currentLightboxImages.length}`;

    // Show loader
    loader.style.display = 'block';
    img.style.opacity = '0.4';

    // Create a temporary image loader to ensure it's ready
    const tempImg = new Image();
    tempImg.onload = function() {
        img.src = src;
        img.style.opacity = '1';
        loader.style.display = 'none';
    };
    tempImg.onerror = function() {
        loader.style.display = 'none';
    };
    tempImg.src = src;
    
    // Preload neighbors
    preloadNeighborImages();
}

function preloadNeighborImages() {
    if (currentLightboxImages.length <= 1) return;
    const nextIndex = (currentLightboxIndex + 1) % currentLightboxImages.length;
    const prevIndex = (currentLightboxIndex - 1 + currentLightboxImages.length) % currentLightboxImages.length;
    (new Image()).src = currentLightboxImages[nextIndex];
    (new Image()).src = currentLightboxImages[prevIndex];
}

function navigateLightbox(e, direction) {
    if(e) e.stopPropagation();
    currentLightboxIndex += direction;
    
    // Loop navigation
    if (currentLightboxIndex < 0) currentLightboxIndex = currentLightboxImages.length - 1;
    if (currentLightboxIndex >= currentLightboxImages.length) currentLightboxIndex = 0;
    
    updateLightboxImage();
}

// Swipe Logic
function handleTouchStart(e) {
    touchStartX = e.changedTouches[0].screenX;
}

function handleTouchEnd(e) {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
}

function handleSwipe() {
    const threshold = 50;
    if (touchEndX < touchStartX - threshold) {
        navigateLightbox(null, 1); // Swipe Left -> Next
    }
    if (touchEndX > touchStartX + threshold) {
        navigateLightbox(null, -1); // Swipe Right -> Prev
    }
}

// Keyboard Support
document.addEventListener('keydown', (e) => {
    const lightbox = document.getElementById('reviewLightbox');
    if(!lightbox.classList.contains('active')) return;
    
    if (e.key === 'Escape') closeReviewLightbox();
    if (e.key === 'ArrowLeft') navigateLightbox(null, -1);
    if (e.key === 'ArrowRight') navigateLightbox(null, 1);
});
    </script>
</body>
</html>